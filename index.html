<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybersecurity Guide - Protecting Your Digital World</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cyber-blue': '#1E40AF',
                        'cyber-teal': '#0891B2',
                        'cyber-dark': '#1E3A8A',
                        'cyber-light': '#EFF6FF'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 102, 204, 0.3); }
            50% { box-shadow: 0 0 30px rgba(0, 102, 204, 0.6); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .float-animation { animation: float 3s ease-in-out infinite; }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .slide-in { animation: slideIn 0.6s ease-out; }
        .threat-card:hover { transform: translateY(-5px); transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

    <!-- Dark Mode Detection Script -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md z-50 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-shield-alt text-cyber-blue text-2xl"></i>
                    <h1 class="text-xl font-bold text-cyber-blue">CyberGuard</h1>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="#overview" class="hover:text-cyber-blue transition-colors">Overview</a>
                    <a href="#facts" class="hover:text-cyber-blue transition-colors">Hidden Facts</a>
                    <a href="#threats" class="hover:text-cyber-blue transition-colors">Threats</a>
                    <a href="#practices" class="hover:text-cyber-blue transition-colors">Best Practices</a>
                    <a href="#game" class="hover:text-cyber-blue transition-colors">Interactive Game</a>
                    <a href="#learning-hubs" class="hover:text-cyber-blue transition-colors">Learning Hubs</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-20 pb-16 bg-gradient-to-br from-cyber-light to-white dark:from-gray-800 dark:to-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="float-animation mb-6">
                <i class="fas fa-shield-alt text-6xl text-cyber-blue mb-2"></i>
            </div>
            <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-cyber-blue to-cyber-teal bg-clip-text text-transparent">
                Cybersecurity Essentials
            </h1>
            <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-8">
                Learn how to protect yourself and your organization from digital threats in today's connected world
            </p>
            <div class="flex justify-center items-center space-x-4 text-lg flex-wrap gap-4">
                <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm px-6 py-3 rounded-lg border border-gray-200 dark:border-gray-600 shadow-lg">
                    <i class="fas fa-graduation-cap text-cyber-blue mr-2"></i>
                    <span class="font-medium">Easy to Learn</span>
                </div>
                <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm px-6 py-3 rounded-lg border border-gray-200 dark:border-gray-600 shadow-lg">
                    <i class="fas fa-gamepad text-cyber-teal mr-2"></i>
                    <span class="font-medium">Interactive</span>
                </div>
                <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm px-6 py-3 rounded-lg border border-gray-200 dark:border-gray-600 shadow-lg">
                    <i class="fas fa-briefcase text-cyber-dark mr-2"></i>
                    <span class="font-medium">Professional</span>
                </div>
            </div>
        </div>
    </section>

    <!-- AI in Cybersecurity Hero -->
    <section class="py-16 bg-gradient-to-br from-blue-900 to-purple-900 relative overflow-hidden">
        <div class="absolute inset-0 bg-black/30"></div>
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="text-white">
                    <h2 class="text-3xl md:text-5xl font-bold mb-6">
                        AI-Powered Cybersecurity
                    </h2>
                    <p class="text-xl mb-8 text-blue-100">
                        The future of digital protection combines artificial intelligence with human expertise to defend against evolving cyber threats.
                    </p>
                    <div class="flex space-x-4">
                        <button onclick="toggleAIChat()" class="bg-cyan-500 text-white px-8 py-3 rounded-lg hover:bg-cyan-600 transition-all duration-300 font-semibold">
                            <i class="fas fa-robot mr-2"></i>Chat with AI Assistant
                        </button>
                        <a href="#learning-hubs" class="border border-white text-white px-8 py-3 rounded-lg hover:bg-white hover:text-blue-900 transition-all duration-300 font-semibold">
                            Learn More
                        </a>
                    </div>
                </div>
                <div class="relative">
                    <img src="https://360advanced.com/wp-content/uploads/2025/02/AI-cybersecurity-blog-image.jpg" alt="AI Cybersecurity" class="rounded-xl shadow-2xl w-full h-auto">
                    <div class="absolute inset-0 bg-gradient-to-t from-blue-900/50 to-transparent rounded-xl"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- What is Cybersecurity Section -->
    <section id="overview" class="py-16 bg-white dark:bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    What is Cybersecurity All About?
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6">
                    <p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed">
                        Cybersecurity is the practice of protecting digital systems, networks, and data from malicious attacks, unauthorized access, and cyber threats. It encompasses technologies, processes, and practices designed to safeguard our increasingly connected digital world.
                    </p>
                    <p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed">
                        In today's digital age, cybersecurity is crucial for protecting personal information, business data, financial assets, and critical infrastructure. With cyber attacks becoming more sophisticated and frequent, understanding cybersecurity principles is essential for everyone.
                    </p>
                    <div class="bg-cyber-light dark:bg-gray-800 p-6 rounded-lg border-l-4 border-cyber-blue">
                        <h3 class="font-bold text-cyber-dark dark:text-white mb-2">Why It Matters:</h3>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                            <li><i class="fas fa-check text-cyber-blue mr-2"></i>Protects sensitive personal and business data</li>
                            <li><i class="fas fa-check text-cyber-blue mr-2"></i>Prevents financial losses from cyber crimes</li>
                            <li><i class="fas fa-check text-cyber-blue mr-2"></i>Maintains business continuity and reputation</li>
                            <li><i class="fas fa-check text-cyber-blue mr-2"></i>Ensures compliance with data protection regulations</li>
                        </ul>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-6">
                    <div class="text-center p-6 bg-gradient-to-br from-cyber-light to-white dark:from-gray-800 dark:to-gray-700 rounded-lg shadow-lg">
                        <div class="float-animation">
                            <i class="fas fa-lock text-4xl text-cyber-blue mb-4"></i>
                        </div>
                        <h3 class="font-bold text-cyber-dark dark:text-white">Data Protection</h3>
                    </div>
                    <div class="text-center p-6 bg-gradient-to-br from-cyber-light to-white dark:from-gray-800 dark:to-gray-700 rounded-lg shadow-lg">
                        <div class="float-animation" style="animation-delay: 0.5s;">
                            <i class="fas fa-network-wired text-4xl text-cyber-teal mb-4"></i>
                        </div>
                        <h3 class="font-bold text-cyber-dark dark:text-white">Network Security</h3>
                    </div>
                    <div class="text-center p-6 bg-gradient-to-br from-cyber-light to-white dark:from-gray-800 dark:to-gray-700 rounded-lg shadow-lg">
                        <div class="float-animation" style="animation-delay: 1s;">
                            <i class="fas fa-mobile-alt text-4xl text-cyber-blue mb-4"></i>
                        </div>
                        <h3 class="font-bold text-cyber-dark dark:text-white">Device Security</h3>
                    </div>
                    <div class="text-center p-6 bg-gradient-to-br from-cyber-light to-white dark:from-gray-800 dark:to-gray-700 rounded-lg shadow-lg">
                        <div class="float-animation" style="animation-delay: 1.5s;">
                            <i class="fas fa-cloud text-4xl text-cyber-teal mb-4"></i>
                        </div>
                        <h3 class="font-bold text-cyber-dark dark:text-white">Cloud Security</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hidden Cybersecurity Facts Section -->
    <section id="facts" class="py-16 bg-gray-50 dark:bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    Hidden Cybersecurity Truths
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
                    Discover shocking cybersecurity facts and advanced threats that most people never hear about
                </p>
            </div>

            <!-- Shocking Statistics -->
            <div class="mb-16">
                <h3 class="text-2xl font-bold text-cyber-dark dark:text-white mb-8 text-center">Shocking Statistics You Probably Don't Know</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg text-center border border-gray-200 dark:border-gray-600">
                        <div class="text-4xl font-bold text-red-500 mb-2">39</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">seconds</div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">Average time between cyberattacks globally</div>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg text-center border border-gray-200 dark:border-gray-600">
                        <div class="text-4xl font-bold text-orange-500 mb-2">95%</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">human error</div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">Of successful cyber attacks are due to human mistakes</div>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg text-center border border-gray-200 dark:border-gray-600">
                        <div class="text-4xl font-bold text-purple-500 mb-2">300</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">days average</div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">Time to detect a data breach after it occurs</div>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg text-center border border-gray-200 dark:border-gray-600">
                        <div class="text-4xl font-bold text-blue-500 mb-2">$10M</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">average cost</div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">Average cost of a data breach in 2024</div>
                    </div>
                </div>
            </div>

            <!-- Advanced Threats -->
            <div class="mb-16">
                <h3 class="text-2xl font-bold text-cyber-dark dark:text-white mb-8 text-center">Advanced Threats Most People Haven't Heard Of</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Living off the Land -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-leaf text-2xl text-green-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">Living Off The Land</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Hackers use legitimate system tools (PowerShell, WMI, etc.) to conduct attacks, making detection nearly impossible since they're using "trusted" software already on your computer.
                        </p>
                    </div>

                    <!-- Supply Chain Poisoning -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-industry text-2xl text-red-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">Supply Chain Poisoning</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Attackers compromise software before it reaches you by infiltrating the development process itself. The SolarWinds attack affected 18,000+ organizations this way.
                        </p>
                    </div>

                    <!-- Typosquatting -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-keyboard text-2xl text-orange-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">Typosquatting</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Cybercriminals register domains with common typos (googel.com, amazom.com) to catch users who mistype URLs and steal their credentials.
                        </p>
                    </div>

                    <!-- Watering Hole Attacks -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-tint text-2xl text-blue-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">Watering Hole Attacks</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Hackers compromise websites frequently visited by their target group, then infect visitors' computers. Like poisoning a watering hole to catch animals.
                        </p>
                    </div>

                    <!-- Fileless Malware -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-ghost text-2xl text-purple-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">Fileless Malware</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Malware that exists only in memory and never writes files to disk, making it invisible to traditional antivirus software that scans files.
                        </p>
                    </div>

                    <!-- DNS Tunneling -->
                    <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-tunnel text-2xl text-teal-500 mr-3"></i>
                            <h4 class="text-lg font-bold text-cyber-dark dark:text-white">DNS Tunneling</h4>
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-300">
                            Attackers hide malicious traffic inside DNS requests (which are rarely monitored) to communicate with compromised systems and steal data.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Mind-Blowing Facts -->
            <div class="mb-16">
                <h3 class="text-2xl font-bold text-cyber-dark dark:text-white mb-8 text-center">Mind-Blowing Cybersecurity Facts</h3>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700">
                            <h4 class="font-bold text-red-700 dark:text-red-300 mb-2">The Password "123456" is Still #1</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">Despite decades of warnings, "123456" remains the most commonly used password globally, followed by "password" and "123456789".</p>
                        </div>

                        <div class="bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700">
                            <h4 class="font-bold text-blue-700 dark:text-blue-300 mb-2">Your Smart Fridge Can Be Hacked</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">IoT devices like smart fridges, thermostats, and light bulbs are often used to launch massive DDoS attacks because they have weak security.</p>
                        </div>

                        <div class="bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-6 rounded-lg border border-green-200 dark:border-green-700">
                            <h4 class="font-bold text-green-700 dark:text-green-300 mb-2">Cybercrime Pays More Than Drugs</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">Cybercrime is now more profitable than the global illegal drug trade, with estimated damages of over $8 trillion annually.</p>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700">
                            <h4 class="font-bold text-purple-700 dark:text-purple-300 mb-2">USB Drops Have 68% Success Rate</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">When hackers drop infected USB drives in parking lots, 68% of people will plug them into their computers, and 90% will do so if it has a company logo.</p>
                        </div>

                        <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 p-6 rounded-lg border border-yellow-200 dark:border-yellow-700">
                            <h4 class="font-bold text-yellow-700 dark:text-yellow-300 mb-2">AI Can Crack Passwords by Sound</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">AI can now identify keystrokes with 95% accuracy just by listening to the sound of typing, potentially revealing passwords through microphones.</p>
                        </div>

                        <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-6 rounded-lg border border-indigo-200 dark:border-indigo-700">
                            <h4 class="font-bold text-indigo-700 dark:text-indigo-300 mb-2">Dark Web Markets Accept Returns</h4>
                            <p class="text-sm text-gray-700 dark:text-gray-300">Some dark web marketplaces operate like legitimate businesses, offering customer service, money-back guarantees, and even product reviews.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unknown Vulnerabilities -->
            <div>
                <h3 class="text-2xl font-bold text-cyber-dark dark:text-white mb-8 text-center">Vulnerabilities Hiding in Plain Sight</h3>
                <div class="bg-gradient-to-r from-cyber-blue/10 to-cyber-teal/10 dark:from-cyber-blue/20 dark:to-cyber-teal/20 p-8 rounded-lg border border-cyber-blue/20 dark:border-cyber-blue/30">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <i class="fas fa-wifi text-3xl text-cyber-blue mb-3"></i>
                            <h4 class="font-bold text-cyber-dark dark:text-white mb-2">WiFi SSIDs as Weapons</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Malicious WiFi network names can crash iPhones and Android devices without connecting to them.</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-microchip text-3xl text-cyber-teal mb-3"></i>
                            <h4 class="font-bold text-cyber-dark dark:text-white mb-2">Hardware Backdoors</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Microscopic chips smaller than rice grains can be secretly added to circuit boards during manufacturing.</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-eye text-3xl text-purple-500 mb-3"></i>
                            <h4 class="font-bold text-cyber-dark dark:text-white mb-2">Screen Light Spying</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Attackers can reconstruct what's on your screen by analyzing light reflections in your eyes through webcam footage.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI vs Human Security -->
    <section class="py-16 bg-gradient-to-r from-gray-100 to-blue-50 dark:from-gray-800 dark:to-gray-900 relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="relative">
                    <img src="https://focus.namirial.com/en/wp-content/uploads/sites/4/2023/06/ai-in-cybersecurity.jpeg" alt="AI in Cybersecurity" class="rounded-xl shadow-2xl w-full h-auto">
                    <div class="absolute inset-0 bg-gradient-to-t from-blue-600/30 to-transparent rounded-xl"></div>
                </div>
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold mb-6 text-cyber-dark dark:text-white">
                        Human + AI Security Alliance
                    </h2>
                    <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
                        The most effective cybersecurity strategy combines human intelligence with AI-powered automation to detect, prevent, and respond to threats in real-time.
                    </p>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="bg-blue-500 p-2 rounded-full mr-4 mt-1">
                                <i class="fas fa-brain text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 dark:text-white">Human Intelligence</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-300">Strategic thinking, context understanding, and complex decision-making</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="bg-purple-500 p-2 rounded-full mr-4 mt-1">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 dark:text-white">AI Automation</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-300">24/7 monitoring, pattern recognition, and instant threat response</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Threats Section -->
    <section id="threats" class="py-16 bg-white dark:bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    Types of Cybersecurity Threats
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
                    Understanding common cyber threats is the first step in protecting yourself and your organization
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Phishing -->
                <div class="threat-card bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg shadow-lg border border-red-200 dark:border-red-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-fish text-4xl text-red-500 mb-4 float-animation"></i>
                        <h3 class="text-xl font-bold text-red-700 dark:text-red-300">Phishing</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Fraudulent attempts to obtain sensitive information by disguising as a trustworthy entity in electronic communications, typically through fake emails or websites.
                    </p>
                </div>

                <!-- Ransomware -->
                <div class="threat-card bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 p-6 rounded-lg shadow-lg border border-orange-200 dark:border-orange-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-lock text-4xl text-orange-500 mb-4 float-animation" style="animation-delay: 0.2s;"></i>
                        <h3 class="text-xl font-bold text-orange-700 dark:text-orange-300">Ransomware</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Malicious software that encrypts files and demands payment for decryption. Can paralyze entire organizations and cause significant financial losses.
                    </p>
                </div>

                <!-- Malware -->
                <div class="threat-card bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg shadow-lg border border-purple-200 dark:border-purple-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-virus text-4xl text-purple-500 mb-4 float-animation" style="animation-delay: 0.4s;"></i>
                        <h3 class="text-xl font-bold text-purple-700 dark:text-purple-300">Malware</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Malicious software designed to damage, disrupt, or gain unauthorized access to computer systems. Includes viruses, worms, trojans, and spyware.
                    </p>
                </div>

                <!-- Data Breaches -->
                <div class="threat-card bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg shadow-lg border border-blue-200 dark:border-blue-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-database text-4xl text-blue-500 mb-4 float-animation" style="animation-delay: 0.6s;"></i>
                        <h3 class="text-xl font-bold text-blue-700 dark:text-blue-300">Data Breaches</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Unauthorized access to confidential data, often resulting in theft of personal information, financial records, or trade secrets.
                    </p>
                </div>

                <!-- Social Engineering -->
                <div class="threat-card bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 p-6 rounded-lg shadow-lg border border-yellow-200 dark:border-yellow-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-users text-4xl text-yellow-500 mb-4 float-animation" style="animation-delay: 0.8s;"></i>
                        <h3 class="text-xl font-bold text-yellow-700 dark:text-yellow-300">Social Engineering</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Psychological manipulation tactics used to trick people into divulging confidential information or performing actions that compromise security.
                    </p>
                </div>

                <!-- Insider Threats -->
                <div class="threat-card bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-6 rounded-lg shadow-lg border border-indigo-200 dark:border-indigo-700">
                    <div class="text-center mb-4">
                        <i class="fas fa-user-secret text-4xl text-indigo-500 mb-4 float-animation" style="animation-delay: 1s;"></i>
                        <h3 class="text-xl font-bold text-indigo-700 dark:text-indigo-300">Insider Threats</h3>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 text-sm">
                        Security risks that come from people within the organization, whether through malicious intent, negligence, or compromised credentials.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Best Practices Section -->
    <section id="practices" class="py-16 bg-cyber-light dark:bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    Best Practices for Cybersecurity
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
                    Implement these essential security measures to protect yourself and your organization
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Strong Passwords -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-cyber-blue/10 p-3 rounded-full mr-4">
                            <i class="fas fa-key text-cyber-blue text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Strong Passwords</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Use 12+ characters with mixed case, numbers, symbols</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Unique password for each account</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Consider using a password manager</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Avoid personal information in passwords</li>
                    </ul>
                </div>

                <!-- Multi-Factor Authentication -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-cyber-teal/10 p-3 rounded-full mr-4">
                            <i class="fas fa-shield-alt text-cyber-teal text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Multi-Factor Authentication</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Enable 2FA on all critical accounts</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Use authenticator apps over SMS</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Keep backup codes secure</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Consider hardware security keys</li>
                    </ul>
                </div>

                <!-- Software Updates -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-500/10 p-3 rounded-full mr-4">
                            <i class="fas fa-sync-alt text-green-500 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Software Updates</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Enable automatic updates when possible</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Update operating systems promptly</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Keep antivirus software current</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Update browser and plugins regularly</li>
                    </ul>
                </div>

                <!-- Safe Browsing -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-500/10 p-3 rounded-full mr-4">
                            <i class="fas fa-globe text-blue-500 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Safe Browsing</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Verify website URLs before entering data</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Look for HTTPS encryption</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Avoid downloading from untrusted sources</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Use reputable antivirus and ad blockers</li>
                    </ul>
                </div>

                <!-- Email Security -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-red-500/10 p-3 rounded-full mr-4">
                            <i class="fas fa-envelope-open-text text-red-500 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Recognizing Suspicious Emails</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>Check sender addresses carefully</li>
                        <li><i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>Be wary of urgent or threatening language</li>
                        <li><i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>Don't click suspicious links or attachments</li>
                        <li><i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>Verify requests through other channels</li>
                    </ul>
                </div>

                <!-- Data Backup -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-600">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-500/10 p-3 rounded-full mr-4">
                            <i class="fas fa-cloud-upload-alt text-purple-500 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-cyber-dark dark:text-white">Data Backup</h3>
                    </div>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Follow 3-2-1 backup rule</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Test backup restoration regularly</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Store backups offline when possible</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>Encrypt sensitive backup data</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Cybersecurity Investigation Game -->
    <section id="game" class="py-16 bg-white dark:bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    Cyber Investigation Lab
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-4xl mx-auto">
                    You'll investigate everyday clues--emails, sign-ins, websites, and files--to figure out how attackers got in, what they did, and how to stop them. 
                    Every step reinforces the core skills cybersecurity professionals use on the job.
                </p>
            </div>

            <!-- Investigation Interface -->
            <div class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl shadow-xl border border-gray-200 dark:border-gray-600 overflow-hidden">
                <!-- Investigation Header -->
                <div class="bg-red-600 text-white p-4 flex items-center justify-between">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-2xl mr-3"></i>
                        <div>
                            <h3 class="text-lg font-bold">SECURITY INCIDENT DETECTED</h3>
                            <p class="text-sm opacity-90" id="incidentTitle">Suspicious Activity in Corporate Network</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm">Priority: <span class="font-bold text-yellow-300">HIGH</span></div>
                        <div class="text-xs opacity-75">Assigned: Cyber Detective (You)</div>
                    </div>
                </div>

                <!-- Investigation Progress -->
                <div class="bg-white dark:bg-gray-600 p-4 border-b border-gray-200 dark:border-gray-500">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-gray-700 dark:text-gray-300">Investigation Progress</span>
                        <span class="text-sm text-gray-600 dark:text-gray-400" id="progressText">0% Complete</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                        <div class="bg-cyber-blue h-2 rounded-full transition-all duration-500" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Evidence Tabs -->
                <div class="bg-white dark:bg-gray-600 border-b border-gray-200 dark:border-gray-500">
                    <div class="flex space-x-0" id="evidenceTabs">
                        <button class="px-6 py-3 font-semibold border-b-2 border-cyber-blue text-cyber-blue bg-blue-50 dark:bg-blue-900/30" onclick="showEvidence('email')">
                            <i class="fas fa-envelope mr-2"></i>Email Logs
                        </button>
                        <button class="px-6 py-3 font-semibold text-gray-600 dark:text-gray-400 hover:text-cyber-blue transition-colors" onclick="showEvidence('login')">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login Activity
                        </button>
                        <button class="px-6 py-3 font-semibold text-gray-600 dark:text-gray-400 hover:text-cyber-blue transition-colors" onclick="showEvidence('network')">
                            <i class="fas fa-network-wired mr-2"></i>Network Traffic
                        </button>
                        <button class="px-6 py-3 font-semibold text-gray-600 dark:text-gray-400 hover:text-cyber-blue transition-colors" onclick="showEvidence('files')">
                            <i class="fas fa-file-alt mr-2"></i>File System
                        </button>
                    </div>
                </div>

                <!-- Evidence Panel -->
                <div class="p-6">
                    <!-- Email Evidence -->
                    <div id="emailEvidence" class="evidence-panel">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Suspicious Email Activity</h4>
                        <div class="space-y-4" id="emailList">
                            <!-- Emails will be loaded here -->
                        </div>
                    </div>

                    <!-- Login Evidence -->
                    <div id="loginEvidence" class="evidence-panel hidden">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Login Activity Analysis</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-100 dark:bg-gray-700">
                                    <tr>
                                        <th class="text-left p-3">Timestamp</th>
                                        <th class="text-left p-3">User</th>
                                        <th class="text-left p-3">IP Address</th>
                                        <th class="text-left p-3">Location</th>
                                        <th class="text-left p-3">Status</th>
                                        <th class="text-left p-3">Analyze</th>
                                    </tr>
                                </thead>
                                <tbody id="loginTable" class="divide-y divide-gray-200 dark:divide-gray-600">
                                    <!-- Login data will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Network Evidence -->
                    <div id="networkEvidence" class="evidence-panel hidden">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Network Traffic Patterns</h4>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h5 class="font-semibold mb-3">Unusual Outbound Connections</h5>
                                <div id="networkConnections" class="space-y-2">
                                    <!-- Network connections will be loaded here -->
                                </div>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <h5 class="font-semibold mb-3">DNS Queries</h5>
                                <div id="dnsQueries" class="space-y-2">
                                    <!-- DNS queries will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- File Evidence -->
                    <div id="fileEvidence" class="evidence-panel hidden">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-4">File System Analysis</h4>
                        <div class="space-y-4" id="fileList">
                            <!-- Files will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Investigation Actions -->
                <div class="bg-gray-100 dark:bg-gray-700 p-6 border-t border-gray-200 dark:border-gray-600">
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-4">
                            <button onclick="startInvestigation()" class="bg-cyber-blue text-white px-6 py-2 rounded-lg hover:bg-cyber-dark transition-all duration-300">
                                <i class="fas fa-play mr-2"></i>Start Investigation
                            </button>
                            <button onclick="resetInvestigation()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all duration-300">
                                <i class="fas fa-redo mr-2"></i>Reset Case
                            </button>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="text-sm text-gray-600 dark:text-gray-400">
                                Clues Found: <span class="font-bold text-cyber-blue" id="cluesFound">0/12</span>
                            </div>
                            <button onclick="submitReport()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-all duration-300 opacity-50" id="submitButton" disabled>
                                <i class="fas fa-file-alt mr-2"></i>Submit Report
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Investigation Report Modal -->
                <div id="reportModal" class="hidden fixed inset-0 bg-black/75 flex items-center justify-center z-50">
                    <div class="bg-white dark:bg-gray-700 p-8 rounded-xl max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Investigation Report</h3>
                        <div id="reportContent" class="space-y-4 text-gray-700 dark:text-gray-300">
                            <!-- Report will be generated here -->
                        </div>
                        <div class="flex justify-end space-x-4 mt-6">
                            <button onclick="closeReport()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-all duration-300">
                                Close
                            </button>
                            <button onclick="nextCase()" class="bg-cyber-blue text-white px-6 py-2 rounded-lg hover:bg-cyber-dark transition-all duration-300">
                                Next Case
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Learning Hubs Section -->
    <section id="learning-hubs" class="py-16 bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-indigo-900/20 dark:to-purple-900/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-cyber-dark dark:text-white">
                    🎓 Cybersecurity Learning Hubs
                </h2>
                <div class="w-24 h-1 bg-cyber-blue mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-4xl mx-auto">
                    Take your cybersecurity career to the next level with these world-class training programs and certifications from top institutions
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                <!-- SANS Institute -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 overflow-hidden">
                    <div class="h-48 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                        <div class="text-center text-white">
                            <i class="fas fa-shield-alt text-6xl mb-4"></i>
                            <h3 class="text-2xl font-bold">SANS Institute</h3>
                            <p class="text-sm opacity-90">World's largest cybersecurity training provider</p>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <div class="flex items-center mb-2">
                                <span class="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 px-2 py-1 rounded text-xs font-semibold mr-2">FREE ACCESS</span>
                                <span class="text-gray-500 text-xs">180K+ Alumni</span>
                            </div>
                            <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Cybersecurity Training Community</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Access 1,000+ free cybersecurity resources, live workshops, webinars, and hands-on cyber ranges.</p>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-check text-green-500 mr-2"></i>85+ Expert-led courses
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-check text-green-500 mr-2"></i>GIAC certifications
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-check text-green-500 mr-2"></i>Monthly CTF challenges
                            </div>
                        </div>
                        <a href="https://www.sans.org/mlp/cybersecurity-training-community" target="_blank" class="block w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white text-center py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 font-semibold">
                            <i class="fas fa-external-link-alt mr-2"></i>Join Free Community
                        </a>
                    </div>
                </div>

                <!-- King's College London -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 overflow-hidden">
                    <div class="h-48 bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
                        <div class="text-center text-white">
                            <i class="fas fa-university text-6xl mb-4"></i>
                            <h3 class="text-2xl font-bold">King's College London</h3>
                            <p class="text-sm opacity-90">#5 in UK, #31 globally (QS Rankings)</p>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <div class="flex items-center mb-2">
                                <span class="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded text-xs font-semibold mr-2">MSc DEGREE</span>
                                <span class="text-gray-500 text-xs">NCSC Certified</span>
                            </div>
                            <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Advanced Cyber Security MSc</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">100% online, part-time master's degree bridging technology and society in cybersecurity.</p>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-clock text-purple-500 mr-2"></i>2 years part-time (20-25 hrs/week)
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-laptop text-purple-500 mr-2"></i>100% online flexibility
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-certificate text-purple-500 mr-2"></i>Research-led curriculum
                            </div>
                        </div>
                        <a href="https://online.kcl.ac.uk/advanced-cyber-security-msc-online" target="_blank" class="block w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-center py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 font-semibold">
                            <i class="fas fa-external-link-alt mr-2"></i>Download Brochure
                        </a>
                    </div>
                </div>

                <!-- EC-Council University -->
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 overflow-hidden">
                    <div class="h-48 bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center">
                        <div class="text-center text-white">
                            <i class="fas fa-globe-americas text-6xl mb-4"></i>
                            <h3 class="text-2xl font-bold">EC-Council University</h3>
                            <p class="text-sm opacity-90">World-renowned cybersecurity specialists</p>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="mb-4">
                            <div class="flex items-center mb-2">
                                <span class="bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 px-2 py-1 rounded text-xs font-semibold mr-2">DEGREE</span>
                                <span class="text-gray-500 text-xs">Fully Accredited</span>
                            </div>
                            <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Cybersecurity Degrees</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Bachelor's and Master's programs with up to 5 industry certifications included.</p>
                        </div>
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-award text-red-500 mr-2"></i>Up to 5 certifications included
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-dollar-sign text-red-500 mr-2"></i>Scholarships available
                            </div>
                            <div class="flex items-center text-xs text-gray-600 dark:text-gray-400">
                                <i class="fas fa-calendar text-red-500 mr-2"></i>Flexible online learning
                            </div>
                        </div>
                        <a href="https://www.eccu.edu/cybersecurity-degrees" target="_blank" class="block w-full bg-gradient-to-r from-red-500 to-orange-600 text-white text-center py-3 rounded-lg hover:from-red-600 hover:to-orange-700 transition-all duration-300 font-semibold">
                            <i class="fas fa-external-link-alt mr-2"></i>Explore Programs
                        </a>
                    </div>
                </div>
            </div>

            <!-- Additional Learning Resources -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-8">
                <h3 class="text-2xl font-bold text-center text-cyber-dark dark:text-white mb-6">More Learning Opportunities</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="bg-blue-500 p-3 rounded-full mr-4">
                            <i class="fas fa-graduation-cap text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800 dark:text-white">Cisco Networking Academy</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Introduction to Cybersecurity course</p>
                            <a href="https://netacad.com/courses/introduction-to-cybersecurity" target="_blank" class="text-blue-500 hover:text-blue-600 text-sm font-medium">
                                Start Free Course →
                            </a>
                        </div>
                    </div>
                    <div class="flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="bg-green-500 p-3 rounded-full mr-4">
                            <i class="fas fa-code text-white text-xl"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800 dark:text-white">Hands-on Practice</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Interactive labs and simulations</p>
                            <button onclick="startInvestigation()" class="text-green-500 hover:text-green-600 text-sm font-medium">
                                Try Our Investigation Lab →
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Assistant Floating Button -->
    <div id="aiAssistantButton" class="fixed bottom-6 right-6 z-50">
        <button onclick="toggleAIChat()" class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white p-4 rounded-full shadow-2xl hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 pulse-glow">
            <i class="fas fa-robot text-2xl"></i>
        </button>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiChatModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl h-96 flex flex-col">
            <!-- Chat Header -->
            <div class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white p-4 rounded-t-xl flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-robot text-2xl mr-3"></i>
                    <div>
                        <h3 class="font-bold text-lg">CyberGuard AI Assistant</h3>
                        <p class="text-xs opacity-90">Your cybersecurity expert companion</p>
                    </div>
                </div>
                <button onclick="toggleAIChat()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4">
                <div class="flex items-start">
                    <div class="bg-gradient-to-r from-cyan-500 to-blue-500 p-2 rounded-full mr-3 flex-shrink-0">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-xs">
                        <p class="text-sm">Hello! I'm your cybersecurity AI assistant. I can help you with cybersecurity questions, explain concepts, and guide you through security best practices. What would you like to know?</p>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="p-4 border-t border-gray-200 dark:border-gray-600">
                <div class="flex space-x-2">
                    <input type="text" id="chatInput" placeholder="Ask me about cybersecurity..." class="flex-1 p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 dark:bg-gray-700 dark:text-white text-base" onkeypress="handleChatKeyPress(event)">
                    <button onclick="sendAIMessage()" class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-6 py-3 rounded-lg hover:from-cyan-600 hover:to-blue-600 transition-all duration-300 flex items-center">
                        <i class="fas fa-paper-plane mr-2"></i>Send
                    </button>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
                    <i class="fas fa-info-circle mr-1"></i>
                    Ask about phishing, malware, password security, network protection, and more!
                </p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-cyber-dark text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="flex items-center justify-center mb-6">
                <i class="fas fa-shield-alt text-3xl text-cyber-blue mr-3"></i>
                <h3 class="text-2xl font-bold">CyberGuard</h3>
            </div>
            <p class="text-gray-300 mb-4">
                Empowering individuals and organizations with cybersecurity knowledge and best practices.
            </p>
            <p class="text-gray-400 text-sm">
                Stay vigilant, stay secure. Remember: cybersecurity is everyone's responsibility.
            </p>
        </div>
    </footer>

    <script>
        // Investigation Game Variables
        let investigationState = {
            currentCase: 0,
            cluesFound: 0,
            totalClues: 12,
            progress: 0,
            discoveries: []
        };

        // Investigation Cases
        const cases = [
            {
                title: "The Midnight Breach",
                description: "Employee credentials compromised, sensitive data accessed",
                emails: [
                    {
                        id: "email1",
                        from: "it-support@company-security.net",
                        to: "sarah.johnson@company.com",
                        subject: "URGENT: Password Reset Required",
                        timestamp: "2024-01-15 11:42 PM",
                        body: "Your password expires in 2 hours! Click here to reset: http://company-login.secure-update.net/reset",
                        suspicious: true,
                        clues: ["Suspicious domain", "After-hours timing", "Urgent language"],
                        isEvidence: true
                    },
                    {
                        id: "email2",
                        from: "sarah.johnson@company.com",
                        to: "mike.chen@company.com",
                        subject: "RE: Project Files",
                        timestamp: "2024-01-16 12:15 AM",
                        body: "Hey Mike, can you check these project files? I uploaded them to our shared drive earlier.",
                        suspicious: false,
                        clues: ["Normal business communication"],
                        isEvidence: false
                    },
                    {
                        id: "email3",
                        from: "system@company.com",
                        to: "sarah.johnson@company.com",
                        subject: "Login Alert: Unusual Activity",
                        timestamp: "2024-01-16 12:03 AM",
                        body: "We detected a login from: IP 185.220.101.42 (Moscow, Russia) at 11:58 PM",
                        suspicious: true,
                        clues: ["Foreign IP address", "Midnight login time"],
                        isEvidence: true
                    }
                ],
                logins: [
                    {
                        timestamp: "2024-01-15 11:58 PM",
                        user: "sarah.johnson",
                        ip: "185.220.101.42",
                        location: "Moscow, Russia",
                        status: "Success",
                        suspicious: true,
                        clues: ["Foreign location", "After hours", "Successful login"]
                    },
                    {
                        timestamp: "2024-01-15 09:15 AM",
                        user: "sarah.johnson",
                        ip: "192.168.1.105",
                        location: "New York, USA",
                        status: "Success",
                        suspicious: false,
                        clues: ["Normal work hours", "Company network"]
                    },
                    {
                        timestamp: "2024-01-15 11:45 PM",
                        user: "sarah.johnson",
                        ip: "192.168.1.105",
                        location: "New York, USA",
                        status: "Failed",
                        suspicious: true,
                        clues: ["Failed attempt just before foreign success"]
                    }
                ],
                network: [
                    {
                        connection: "185.220.101.42 → fileserver.company.com:22",
                        protocol: "SSH",
                        bytes: "2.4 GB",
                        suspicious: true,
                        clues: ["Large data transfer", "SSH to file server", "Foreign IP"]
                    },
                    {
                        dns: "company-login.secure-update.net",
                        queries: "47",
                        suspicious: true,
                        clues: ["Typosquatting domain", "Multiple DNS queries"]
                    }
                ],
                files: [
                    {
                        name: "employee_data.xlsx",
                        path: "/home/sarah/documents/",
                        modified: "2024-01-16 12:01 AM",
                        size: "2.1 MB",
                        suspicious: true,
                        clues: ["Accessed after compromise", "Sensitive employee data"]
                    },
                    {
                        name: "password_reset.exe",
                        path: "/home/sarah/downloads/",
                        modified: "2024-01-15 11:43 PM",
                        size: "1.2 MB",
                        suspicious: true,
                        clues: ["Executable file", "Downloaded from phishing email"]
                    }
                ],
                attackVector: "Spear Phishing Email",
                recommendations: [
                    "Implement email security training",
                    "Deploy advanced email filtering",
                    "Enable multi-factor authentication",
                    "Monitor for unusual login patterns"
                ]
            }
        ];

        // Investigation Game Functions
        function startInvestigation() {
            investigationState = {
                currentCase: 0,
                cluesFound: 0,
                totalClues: 12,
                progress: 0,
                discoveries: []
            };
            
            loadCase(0);
            updateProgress();
        }

        function loadCase(caseIndex) {
            const currentCase = cases[caseIndex];
            document.getElementById('incidentTitle').textContent = currentCase.title;
            
            // Load emails
            loadEmails(currentCase.emails);
            
            // Load login data
            loadLogins(currentCase.logins);
            
            // Load network data
            loadNetwork(currentCase.network);
            
            // Load file data
            loadFiles(currentCase.files);
        }

        function loadEmails(emails) {
            const emailList = document.getElementById('emailList');
            emailList.innerHTML = '';
            
            emails.forEach(email => {
                const emailDiv = document.createElement('div');
                emailDiv.className = `border border-gray-200 dark:border-gray-600 rounded-lg p-4 ${email.suspicious ? 'border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20' : 'bg-white dark:bg-gray-600'}`;
                
                emailDiv.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <div class="text-sm text-gray-500 dark:text-gray-400">From: <span class="font-mono text-gray-700 dark:text-gray-300">${email.from}</span></div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">To: <span class="font-mono text-gray-700 dark:text-gray-300">${email.to}</span></div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">${email.timestamp}</div>
                        </div>
                        ${email.suspicious ? '<i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>' : '<i class="fas fa-check-circle text-green-500 text-xl"></i>'}
                    </div>
                    <h5 class="font-semibold text-gray-800 dark:text-white mb-2">${email.subject}</h5>
                    <p class="text-gray-700 dark:text-gray-300 text-sm mb-3">${email.body}</p>
                    <button onclick="analyzeEmail('${email.id}')" class="bg-cyber-blue text-white px-4 py-2 rounded text-sm hover:bg-cyber-dark transition-colors">
                        <i class="fas fa-search mr-2"></i>Analyze Email
                    </button>
                `;
                
                emailList.appendChild(emailDiv);
            });
        }

        function loadLogins(logins) {
            const loginTable = document.getElementById('loginTable');
            loginTable.innerHTML = '';
            
            logins.forEach(login => {
                const row = document.createElement('tr');
                row.className = `${login.suspicious ? 'bg-red-50 dark:bg-red-900/20' : ''} hover:bg-gray-50 dark:hover:bg-gray-600`;
                
                row.innerHTML = `
                    <td class="p-3 font-mono text-sm">${login.timestamp}</td>
                    <td class="p-3">${login.user}</td>
                    <td class="p-3 font-mono">${login.ip}</td>
                    <td class="p-3">${login.location}</td>
                    <td class="p-3">
                        <span class="px-2 py-1 rounded text-xs ${login.status === 'Success' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300' : 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300'}">
                            ${login.status}
                        </span>
                    </td>
                    <td class="p-3">
                        <button onclick="analyzeLogin('${login.timestamp}')" class="bg-cyber-blue text-white px-3 py-1 rounded text-xs hover:bg-cyber-dark transition-colors">
                            Investigate
                        </button>
                    </td>
                `;
                
                loginTable.appendChild(row);
            });
        }

        function loadNetwork(networkData) {
            const connectionsDiv = document.getElementById('networkConnections');
            const queriesDiv = document.getElementById('dnsQueries');
            
            connectionsDiv.innerHTML = '';
            queriesDiv.innerHTML = '';
            
            networkData.forEach(item => {
                if (item.connection) {
                    const connDiv = document.createElement('div');
                    connDiv.className = `p-3 rounded border ${item.suspicious ? 'border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20' : 'border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700'}`;
                    connDiv.innerHTML = `
                        <div class="font-mono text-sm mb-1">${item.connection}</div>
                        <div class="text-xs text-gray-600 dark:text-gray-400">${item.protocol} • ${item.bytes}</div>
                        <button onclick="analyzeConnection('${item.connection}')" class="bg-cyber-blue text-white px-2 py-1 rounded text-xs mt-2 hover:bg-cyber-dark transition-colors">
                            Analyze
                        </button>
                    `;
                    connectionsDiv.appendChild(connDiv);
                } else if (item.dns) {
                    const dnsDiv = document.createElement('div');
                    dnsDiv.className = `p-3 rounded border ${item.suspicious ? 'border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20' : 'border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700'}`;
                    dnsDiv.innerHTML = `
                        <div class="font-mono text-sm mb-1">${item.dns}</div>
                        <div class="text-xs text-gray-600 dark:text-gray-400">${item.queries} queries</div>
                        <button onclick="analyzeDNS('${item.dns}')" class="bg-cyber-blue text-white px-2 py-1 rounded text-xs mt-2 hover:bg-cyber-dark transition-colors">
                            Investigate
                        </button>
                    `;
                    queriesDiv.appendChild(dnsDiv);
                }
            });
        }

        function loadFiles(files) {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';
            
            files.forEach(file => {
                const fileDiv = document.createElement('div');
                fileDiv.className = `border border-gray-200 dark:border-gray-600 rounded-lg p-4 ${file.suspicious ? 'border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20' : 'bg-white dark:bg-gray-600'}`;
                
                fileDiv.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center">
                            <i class="fas fa-file text-gray-500 mr-3"></i>
                            <span class="font-mono text-sm">${file.name}</span>
                        </div>
                        ${file.suspicious ? '<i class="fas fa-exclamation-triangle text-red-500"></i>' : ''}
                    </div>
                    <div class="text-xs text-gray-600 dark:text-gray-400 space-y-1">
                        <div>Path: ${file.path}</div>
                        <div>Modified: ${file.modified}</div>
                        <div>Size: ${file.size}</div>
                    </div>
                    <button onclick="analyzeFile('${file.name}')" class="bg-cyber-blue text-white px-4 py-2 rounded text-sm mt-3 hover:bg-cyber-dark transition-colors">
                        <i class="fas fa-magnifying-glass mr-2"></i>Examine File
                    </button>
                `;
                
                fileList.appendChild(fileDiv);
            });
        }

        function showEvidence(type) {
            // Update tab states
            document.querySelectorAll('#evidenceTabs button').forEach(btn => {
                btn.className = 'px-6 py-3 font-semibold text-gray-600 dark:text-gray-400 hover:text-cyber-blue transition-colors';
            });
            event.target.className = 'px-6 py-3 font-semibold border-b-2 border-cyber-blue text-cyber-blue bg-blue-50 dark:bg-blue-900/30';
            
            // Hide all panels
            document.querySelectorAll('.evidence-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Show selected panel
            document.getElementById(type + 'Evidence').classList.remove('hidden');
        }

        function analyzeEmail(emailId) {
            const currentCase = cases[investigationState.currentCase];
            const email = currentCase.emails.find(e => e.id === emailId);
            
            // Add button click feedback
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Analyzing...';
            event.target.disabled = true;
            
            setTimeout(() => {
                if (email && email.isEvidence && !investigationState.discoveries.some(d => d.item.id === email.id)) {
                    investigationState.discoveries.push({
                        type: 'email',
                        item: email,
                        clues: email.clues
                    });
                    
                    investigationState.cluesFound += email.clues.length;
                    updateProgress();
                    showClueModal(email.clues, 'Email Analysis - Evidence Found!');
                    
                    // Update button to show completion
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Analyzed';
                    event.target.className = 'bg-green-500 text-white px-4 py-2 rounded text-sm';
                } else if (email && !email.isEvidence) {
                    showClueModal(['No suspicious activity detected'], 'Email Analysis - Clean');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Clean';
                    event.target.className = 'bg-gray-500 text-white px-4 py-2 rounded text-sm';
                } else if (investigationState.discoveries.some(d => d.item.id === email.id)) {
                    showClueModal(['Already analyzed'], 'Email Analysis - Previously Examined');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Analyzed';
                    event.target.className = 'bg-green-500 text-white px-4 py-2 rounded text-sm';
                }
                event.target.disabled = false;
            }, 1500);
        }

        function analyzeLogin(timestamp) {
            const currentCase = cases[investigationState.currentCase];
            const login = currentCase.logins.find(l => l.timestamp === timestamp);
            
            // Add button click feedback
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Analyzing...';
            event.target.disabled = true;
            
            setTimeout(() => {
                if (login && login.suspicious && !investigationState.discoveries.some(d => d.item.timestamp === timestamp)) {
                    investigationState.discoveries.push({
                        type: 'login',
                        item: login,
                        clues: login.clues
                    });
                    
                    investigationState.cluesFound += login.clues.length;
                    updateProgress();
                    showClueModal(login.clues, 'Login Analysis - Threat Detected!');
                    
                    // Update button to show completion
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Suspicious';
                    event.target.className = 'bg-red-500 text-white px-3 py-1 rounded text-xs';
                } else if (login && !login.suspicious) {
                    showClueModal(['Normal login activity detected'], 'Login Analysis - Normal Activity');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Normal';
                    event.target.className = 'bg-green-500 text-white px-3 py-1 rounded text-xs';
                } else if (investigationState.discoveries.some(d => d.item.timestamp === timestamp)) {
                    showClueModal(['Already analyzed'], 'Login Analysis - Previously Examined');
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Suspicious';
                    event.target.className = 'bg-red-500 text-white px-3 py-1 rounded text-xs';
                }
                event.target.disabled = false;
                
                // Trigger magic 8 ball after first login analysis
                if (investigationState.cluesFound >= 3 && !investigationState.magic8BallShown) {
                    investigationState.magic8BallShown = true;
                    setTimeout(() => showMagic8Ball(), 2000);
                }
            }, 1200);
        }

        function analyzeConnection(connection) {
            const currentCase = cases[investigationState.currentCase];
            const networkItem = currentCase.network.find(n => n.connection === connection);
            
            // Add button click feedback
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Scanning...';
            event.target.disabled = true;
            
            setTimeout(() => {
                if (networkItem && networkItem.suspicious && !investigationState.discoveries.some(d => d.item.connection === connection)) {
                    investigationState.discoveries.push({
                        type: 'network',
                        item: networkItem,
                        clues: networkItem.clues
                    });
                    
                    investigationState.cluesFound += networkItem.clues.length;
                    updateProgress();
                    showClueModal(networkItem.clues, 'Network Analysis - Malicious Traffic!');
                    
                    // Update button to show completion
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Threat';
                    event.target.className = 'bg-red-500 text-white px-2 py-1 rounded text-xs mt-2';
                } else if (networkItem && !networkItem.suspicious) {
                    showClueModal(['Normal network activity'], 'Network Analysis - Clean Traffic');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Clean';
                    event.target.className = 'bg-green-500 text-white px-2 py-1 rounded text-xs mt-2';
                } else if (investigationState.discoveries.some(d => d.item.connection === connection)) {
                    showClueModal(['Already analyzed'], 'Network Analysis - Previously Examined');
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Threat';
                    event.target.className = 'bg-red-500 text-white px-2 py-1 rounded text-xs mt-2';
                }
                event.target.disabled = false;
            }, 1800);
        }

        function analyzeDNS(dns) {
            const currentCase = cases[investigationState.currentCase];
            const dnsItem = currentCase.network.find(n => n.dns === dns);
            
            // Add button click feedback
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Checking...';
            event.target.disabled = true;
            
            setTimeout(() => {
                if (dnsItem && dnsItem.suspicious && !investigationState.discoveries.some(d => d.item.dns === dns)) {
                    investigationState.discoveries.push({
                        type: 'dns',
                        item: dnsItem,
                        clues: dnsItem.clues
                    });
                    
                    investigationState.cluesFound += dnsItem.clues.length;
                    updateProgress();
                    showClueModal(dnsItem.clues, 'DNS Analysis - Malicious Domain!');
                    
                    // Update button to show completion
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Malicious';
                    event.target.className = 'bg-red-500 text-white px-2 py-1 rounded text-xs mt-2';
                } else if (dnsItem && !dnsItem.suspicious) {
                    showClueModal(['Legitimate domain detected'], 'DNS Analysis - Safe Domain');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Safe';
                    event.target.className = 'bg-green-500 text-white px-2 py-1 rounded text-xs mt-2';
                } else if (investigationState.discoveries.some(d => d.item.dns === dns)) {
                    showClueModal(['Already analyzed'], 'DNS Analysis - Previously Examined');
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Malicious';
                    event.target.className = 'bg-red-500 text-white px-2 py-1 rounded text-xs mt-2';
                }
                event.target.disabled = false;
            }, 1600);
        }

        function analyzeFile(fileName) {
            const currentCase = cases[investigationState.currentCase];
            const file = currentCase.files.find(f => f.name === fileName);
            
            // Add button click feedback
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Examining...';
            event.target.disabled = true;
            
            setTimeout(() => {
                if (file && file.suspicious && !investigationState.discoveries.some(d => d.item.name === fileName)) {
                    investigationState.discoveries.push({
                        type: 'file',
                        item: file,
                        clues: file.clues
                    });
                    
                    investigationState.cluesFound += file.clues.length;
                    updateProgress();
                    showClueModal(file.clues, 'File Analysis - Compromised File!');
                    
                    // Update button to show completion
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Compromised';
                    event.target.className = 'bg-red-500 text-white px-4 py-2 rounded text-sm mt-3';
                } else if (file && !file.suspicious) {
                    showClueModal(['Clean file detected'], 'File Analysis - Safe File');
                    event.target.innerHTML = '<i class="fas fa-check mr-2"></i>Clean';
                    event.target.className = 'bg-green-500 text-white px-4 py-2 rounded text-sm mt-3';
                } else if (investigationState.discoveries.some(d => d.item.name === fileName)) {
                    showClueModal(['Already examined'], 'File Analysis - Previously Examined');
                    event.target.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Compromised';
                    event.target.className = 'bg-red-500 text-white px-4 py-2 rounded text-sm mt-3';
                }
                event.target.disabled = false;
            }, 2000);
        }

        // MAGIC 8 BALL BONUS ROUND
        const magic8BallResponses = [
            "🔮 The cyber threats are definitely suspicious",
            "🔒 All signs point to a security breach",
            "⚡ Your investigation skills are excellent",
            "🛡️ The evidence strongly suggests malware",
            "🌟 You're on the right track, detective",
            "🎯 The attack vector is becoming clear",
            "🚀 Your cybersecurity intuition is sharp",
            "💎 The digital forensics reveal the truth",
            "🔥 This investigation will lead to answers",
            "⭐ Trust your security analysis skills",
            "🎪 The hackers left digital fingerprints",
            "🌈 Your threat detection is impressive",
            "🎨 The network logs tell the whole story",
            "🎭 Social engineering was definitely used",
            "🏆 You're becoming a cyber expert",
            "🎯 The phishing attempt was successful",
            "💫 Your incident response is professional",
            "🔮 The malware signature is obvious",
            "⚡ This breach required insider access",
            "🌟 The attacker used living-off-the-land techniques"
        ];

        function showMagic8Ball() {
            // Create the magic 8 ball modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/75 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8 rounded-xl max-w-md w-full mx-4 text-center border-4 border-purple-400 shadow-2xl">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold text-white mb-2">🔮 Cyber Oracle Bonus!</h3>
                        <p class="text-purple-200 text-sm">The mystical cyber oracle has appeared! Ask about your investigation...</p>
                    </div>
                    
                    <div class="relative mb-6">
                        <div id="magic8Ball" class="w-32 h-32 mx-auto bg-gradient-to-br from-black via-gray-900 to-black rounded-full border-4 border-gray-600 shadow-xl cursor-pointer hover:scale-105 transition-all duration-300 flex items-center justify-center" onclick="shakeMagic8Ball()">
                            <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-700 rounded-full flex items-center justify-center">
                                <span class="text-white font-bold text-lg">8</span>
                            </div>
                        </div>
                        <p class="text-white text-sm mt-2">Click to shake!</p>
                    </div>
                    
                    <div id="magic8Response" class="min-h-16 bg-black/50 rounded-lg p-4 mb-6 border border-purple-400">
                        <p class="text-purple-200 text-sm italic">Ask your cybersecurity question and shake the oracle...</p>
                    </div>
                    
                    <div class="space-y-3">
                        <input type="text" id="cyberQuestion" placeholder="Ask about the investigation..." class="w-full p-3 rounded-lg bg-black/50 text-white border border-purple-400 placeholder-purple-300 text-base" maxlength="100">
                        <div class="flex space-x-3">
                            <button onclick="shakeMagic8Ball()" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-300">
                                🔮 Ask Oracle
                            </button>
                            <button onclick="closeMagic8Ball()" class="bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-all duration-300">
                                Continue
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.id = 'magic8BallModal';
            
            // Focus on the input
            setTimeout(() => {
                document.getElementById('cyberQuestion').focus();
            }, 100);
        }

        function shakeMagic8Ball() {
            const ball = document.getElementById('magic8Ball');
            const response = document.getElementById('magic8Response');
            const question = document.getElementById('cyberQuestion').value;
            
            // Animation effect
            ball.style.transform = 'scale(0.9) rotate(360deg)';
            ball.style.transition = 'all 0.5s ease';
            
            // Show loading
            response.innerHTML = '<p class="text-white text-sm animate-pulse">🔮 The cyber oracle is consulting the digital spirits...</p>';
            
            setTimeout(() => {
                // Reset ball animation
                ball.style.transform = 'scale(1) rotate(0deg)';
                
                // Show response
                const randomResponse = magic8BallResponses[Math.floor(Math.random() * magic8BallResponses.length)];
                response.innerHTML = `
                    <div class="text-center">
                        <p class="text-yellow-300 font-bold text-lg mb-2">${randomResponse}</p>
                        ${question ? `<p class="text-purple-200 text-xs italic">In response to: "${question}"</p>` : ''}
                    </div>
                `;
                
                // Add points bonus
                investigationState.cluesFound += 1;
                updateProgress();
                
                // Show bonus notification
                setTimeout(() => {
                    const bonusNotif = document.createElement('div');
                    bonusNotif.className = 'fixed top-20 right-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse';
                    bonusNotif.innerHTML = '🎉 +1 Bonus Clue from Cyber Oracle!';
                    document.body.appendChild(bonusNotif);
                    
                    setTimeout(() => bonusNotif.remove(), 3000);
                }, 1000);
                
            }, 2000);
        }

        function closeMagic8Ball() {
            const modal = document.getElementById('magic8BallModal');
            if (modal) {
                modal.remove();
            }
        }



        function showClueModal(clues, title) {
            // Create and show clue discovery modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/75 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-700 p-6 rounded-xl max-w-md w-full mx-4">
                    <div class="text-center mb-4">
                        <i class="fas fa-lightbulb text-4xl text-yellow-500 mb-2"></i>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white">${title}</h3>
                    </div>
                    <div class="space-y-2 mb-6">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Clues discovered:</p>
                        ${clues.map(clue => `<div class="bg-yellow-50 dark:bg-yellow-900/30 p-2 rounded text-sm text-gray-700 dark:text-gray-300"><i class="fas fa-check text-green-500 mr-2"></i>${clue}</div>`).join('')}
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="w-full bg-cyber-blue text-white py-2 rounded-lg hover:bg-cyber-dark transition-colors">
                        Continue Investigation
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function updateProgress() {
            investigationState.progress = (investigationState.cluesFound / investigationState.totalClues) * 100;
            
            document.getElementById('progressBar').style.width = investigationState.progress + '%';
            document.getElementById('progressText').textContent = Math.round(investigationState.progress) + '% Complete';
            document.getElementById('cluesFound').textContent = investigationState.cluesFound + '/' + investigationState.totalClues;
            
            // Enable submit button when enough clues found
            if (investigationState.cluesFound >= 8) {
                const submitBtn = document.getElementById('submitButton');
                submitBtn.disabled = false;
                submitBtn.classList.remove('opacity-50');
                submitBtn.classList.add('pulse-glow');
            }
        }

        function submitReport() {
            const currentCase = cases[investigationState.currentCase];
            const accuracy = (investigationState.cluesFound / investigationState.totalClues) * 100;
            
            let reportContent = `
                <div class="text-center mb-6">
                    <div class="text-3xl font-bold text-cyber-blue">${Math.round(accuracy)}%</div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">Investigation Accuracy</div>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-bold text-lg mb-3">Attack Vector Identified:</h4>
                    <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg border border-red-200 dark:border-red-600">
                        <i class="fas fa-shield-alt text-red-500 mr-2"></i>
                        <span class="font-semibold">${currentCase.attackVector}</span>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-bold text-lg mb-3">Key Evidence Found:</h4>
                    <div class="space-y-2">
                        ${investigationState.discoveries.map(discovery => `
                            <div class="bg-gray-50 dark:bg-gray-600 p-3 rounded">
                                <div class="font-semibold text-sm">${discovery.type.toUpperCase()}: ${discovery.item.subject || discovery.item.name || discovery.item.connection || discovery.item.dns || 'Evidence'}</div>
                                <div class="text-xs text-gray-600 dark:text-gray-400">${discovery.clues.join(', ')}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg mb-3">Recommended Actions:</h4>
                    <ul class="space-y-2">
                        ${currentCase.recommendations.map(rec => `
                            <li class="text-sm"><i class="fas fa-arrow-right text-cyber-blue mr-2"></i>${rec}</li>
                        `).join('')}
                    </ul>
                </div>
                
                <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-600">
                    <p class="text-sm text-blue-800 dark:text-blue-300">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        <strong>Professional Skill Developed:</strong> ${accuracy >= 80 ? 'Expert-level' : accuracy >= 60 ? 'Intermediate' : 'Beginner'} incident response and digital forensics
                    </p>
                </div>
            `;
            
            document.getElementById('reportContent').innerHTML = reportContent;
            document.getElementById('reportModal').classList.remove('hidden');
        }

        function closeReport() {
            document.getElementById('reportModal').classList.add('hidden');
        }

        function nextCase() {
            closeReport();
            investigationState.currentCase++;
            if (investigationState.currentCase >= cases.length) {
                investigationState.currentCase = 0; // Loop back to first case
            }
            startInvestigation();
        }

        function resetInvestigation() {
            investigationState = {
                currentCase: 0,
                cluesFound: 0,
                totalClues: 12,
                progress: 0,
                discoveries: []
            };
            
            updateProgress();
            const submitBtn = document.getElementById('submitButton');
            submitBtn.disabled = true;
            submitBtn.classList.add('opacity-50');
            submitBtn.classList.remove('pulse-glow');
        }

        // Initialize investigation on page load
        window.addEventListener('load', () => {
            startInvestigation();
        });

        function selectCharacter(character) {
            runnerGame.player.character = character;
            document.getElementById('characterSelection').classList.add('hidden');
            initRunnerGame();
        }

        function goBackToSelection() {
            stopGame();
            document.getElementById('gameSelection').classList.remove('hidden');
            document.getElementById('gameContainer').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.add('hidden');
            resetGameStats();
        }

        function restartCurrentGame() {
            document.getElementById('gameOverScreen').classList.add('hidden');
            resetGameStats();
            if (currentGame === 'cybercraft') {
                initCyberCraftGame();
            } else if (currentGame === 'cybersprint') {
                initCyberSprintGame();
            }
        }

        // CYBERCRAFT 3D GAME (Advanced Tower Defense)
        function initCyberCraftGame() {
            resetGameStats();
            firewallGame.grid = [];
            firewallGame.enemies = [];
            firewallGame.firewalls = [];
            firewallGame.waveNumber = 1;
            firewallGame.enemiesPerWave = 5;
            firewallGame.lastEnemySpawn = 0;
            
            // Initialize 3D-style grid
            for (let x = 0; x < canvas.width; x += firewallGame.gridSize) {
                for (let y = 0; y < canvas.height; y += firewallGame.gridSize) {
                    firewallGame.grid.push({ x, y, occupied: false });
                }
            }
            
            gameRunning = true;
            cyberCraftGameLoop();
            
            // Add click listener for placing 3D towers
            canvas.onclick = place3DTower;
        }

        function cyberCraftGameLoop() {
            if (!gameRunning) return;
            
            // Advanced 3D-style background
            drawAdvanced3DBackground();
            
            // Spawn 3D enemies
            spawn3DEnemies();
            
            // Update and draw 3D enemies
            update3DEnemies();
            
            // Update and draw 3D towers
            draw3DTowers();
            
            // Check collisions with 3D effects
            check3DCollisions();
            
            // Check wave completion
            checkWaveCompletion();
            
            updateGameUI();
            animationId = requestAnimationFrame(cyberCraftGameLoop);
        }

        function drawAdvanced3DBackground() {
            // Sophisticated cyberpunk 3D grid
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0a0a1a');
            gradient.addColorStop(0.5, '#1a1a3a');
            gradient.addColorStop(1, '#0f0f2f');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Advanced 3D grid with perspective
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 0.5;
            ctx.globalAlpha = 0.4;
            
            const perspective = 0.002;
            for (let i = 0; i < 20; i++) {
                const depth = i * 25;
                const scale = 1 - (depth * perspective);
                const offsetY = depth * 0.3;
                
                ctx.beginPath();
                for (let x = 0; x <= canvas.width; x += firewallGame.gridSize * scale) {
                    ctx.moveTo(x, offsetY);
                    ctx.lineTo(x, canvas.height - offsetY);
                }
                ctx.stroke();
                
                ctx.beginPath();
                for (let y = offsetY; y <= canvas.height - offsetY; y += firewallGame.gridSize * scale) {
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                }
                ctx.stroke();
            }
            
            ctx.globalAlpha = 1;
        }

        function spawn3DEnemies() {
            const currentTime = Date.now();
            if (currentTime - firewallGame.lastEnemySpawn > firewallGame.enemySpawnDelay && 
                firewallGame.enemies.filter(e => !e.destroyed).length < firewallGame.enemiesPerWave) {
                
                const enemy = {
                    x: -50,
                    y: Math.random() * (canvas.height - 80) + 40,
                    z: Math.random() * 100,
                    width: 40,
                    height: 40,
                    health: firewallGame.waveNumber * 2,
                    maxHealth: firewallGame.waveNumber * 2,
                    speed: firewallGame.enemySpeed + (firewallGame.waveNumber * 0.3),
                    destroyed: false,
                    type: Math.random() > 0.6 ? 'megavirus' : Math.random() > 0.3 ? 'cryptoworm' : 'botnet',
                    rotation: 0,
                    pulsePhase: Math.random() * Math.PI * 2
                };
                
                firewallGame.enemies.push(enemy);
                firewallGame.lastEnemySpawn = currentTime;
            }
        }

        function update3DEnemies() {
            firewallGame.enemies.forEach((enemy, index) => {
                if (enemy.destroyed) return;
                
                enemy.x += enemy.speed;
                enemy.rotation += 0.1;
                enemy.pulsePhase += 0.15;
                
                // Calculate 3D perspective
                const scale = 1 + (enemy.z * 0.01);
                const renderWidth = enemy.width * scale;
                const renderHeight = enemy.height * scale;
                const pulse = Math.sin(enemy.pulsePhase) * 5;
                
                // Sophisticated 3D enemy rendering
                ctx.save();
                ctx.translate(enemy.x + renderWidth/2, enemy.y + renderHeight/2);
                ctx.rotate(enemy.rotation);
                
                // Enemy body with 3D effect
                const enemyGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, renderWidth/2);
                switch(enemy.type) {
                    case 'megavirus':
                        enemyGradient.addColorStop(0, '#ff4444');
                        enemyGradient.addColorStop(0.7, '#cc1111');
                        enemyGradient.addColorStop(1, '#880808');
                        break;
                    case 'cryptoworm':
                        enemyGradient.addColorStop(0, '#ff8800');
                        enemyGradient.addColorStop(0.7, '#cc4400');
                        enemyGradient.addColorStop(1, '#882200');
                        break;
                    case 'botnet':
                        enemyGradient.addColorStop(0, '#8800ff');
                        enemyGradient.addColorStop(0.7, '#4400cc');
                        enemyGradient.addColorStop(1, '#220088');
                        break;
                }
                
                ctx.fillStyle = enemyGradient;
                ctx.fillRect(-renderWidth/2, -renderHeight/2, renderWidth + pulse, renderHeight + pulse);
                
                // Add sophisticated details
                ctx.fillStyle = '#ffffff40';
                ctx.fillRect(-renderWidth/3, -renderHeight/3, renderWidth/1.5, renderHeight/1.5);
                
                ctx.restore();
                
                // Advanced health bar with 3D effect
                const healthPercent = enemy.health / enemy.maxHealth;
                const barWidth = renderWidth;
                const barHeight = 6;
                
                // Health bar background
                ctx.fillStyle = '#00000080';
                ctx.fillRect(enemy.x, enemy.y - 15, barWidth, barHeight);
                
                // Health bar gradient
                const healthGradient = ctx.createLinearGradient(enemy.x, 0, enemy.x + barWidth, 0);
                healthGradient.addColorStop(0, healthPercent > 0.5 ? '#00ff00' : '#ff0000');
                healthGradient.addColorStop(1, healthPercent > 0.5 ? '#008800' : '#880000');
                ctx.fillStyle = healthGradient;
                ctx.fillRect(enemy.x, enemy.y - 15, barWidth * healthPercent, barHeight);
                
                // Remove if off screen
                if (enemy.x > canvas.width + 50) {
                    gameStats.health -= 15;
                    firewallGame.enemies.splice(index, 1);
                    
                    if (gameStats.health <= 0) {
                        gameOver();
                    }
                }
            });
        }

        function draw3DTowers() {
            firewallGame.firewalls.forEach(tower => {
                const scale = 1.2;
                const renderSize = firewallGame.gridSize * scale;
                
                ctx.save();
                ctx.translate(tower.x + firewallGame.gridSize/2, tower.y + firewallGame.gridSize/2);
                
                // Advanced 3D tower rendering
                const towerGradient = ctx.createLinearGradient(-renderSize/2, -renderSize/2, renderSize/2, renderSize/2);
                switch (tower.type) {
                    case 'basic':
                        towerGradient.addColorStop(0, '#00ff88');
                        towerGradient.addColorStop(0.5, '#00cc66');
                        towerGradient.addColorStop(1, '#008844');
                        break;
                    case 'strong':
                        towerGradient.addColorStop(0, '#0088ff');
                        towerGradient.addColorStop(0.5, '#0066cc');
                        towerGradient.addColorStop(1, '#004488');
                        break;
                    case 'super':
                        towerGradient.addColorStop(0, '#ff00ff');
                        towerGradient.addColorStop(0.5, '#cc00cc');
                        towerGradient.addColorStop(1, '#880088');
                        break;
                }
                
                ctx.fillStyle = towerGradient;
                
                // Draw 3D tower base
                ctx.fillRect(-renderSize/2, -renderSize/2, renderSize, renderSize);
                
                // Add 3D depth effect
                ctx.fillStyle = '#ffffff40';
                ctx.fillRect(-renderSize/3, -renderSize/3, renderSize/1.5, renderSize/1.5);
                
                // Tower top detail
                ctx.fillStyle = '#ffffff80';
                ctx.fillRect(-renderSize/6, -renderSize/6, renderSize/3, renderSize/3);
                
                ctx.restore();
            });
        }

        function place3DTower(event) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            const clickX = (event.clientX - rect.left) * scaleX;
            const clickY = (event.clientY - rect.top) * scaleY;
            
            const gridX = Math.floor(clickX / firewallGame.gridSize) * firewallGame.gridSize;
            const gridY = Math.floor(clickY / firewallGame.gridSize) * firewallGame.gridSize;
            
            // Check if position is occupied
            const occupied = firewallGame.firewalls.some(fw => fw.x === gridX && fw.y === gridY);
            if (occupied || gridX < 80) return;
            
            // Advanced tower types with costs
            const costs = { basic: 0, strong: 100, super: 250 };
            const selectedType = getAdvancedTowerType();
            
            if (gameStats.score >= costs[selectedType]) {
                firewallGame.firewalls.push({
                    x: gridX,
                    y: gridY,
                    type: selectedType,
                    damage: selectedType === 'basic' ? 2 : selectedType === 'strong' ? 5 : 10,
                    range: selectedType === 'basic' ? 60 : selectedType === 'strong' ? 80 : 120
                });
                
                gameStats.score -= costs[selectedType];
            }
        }

        function getAdvancedTowerType() {
            // Cycle through tower types or implement UI selection
            return Math.random() > 0.7 ? 'super' : Math.random() > 0.4 ? 'strong' : 'basic';
        }

        function check3DCollisions() {
            firewallGame.enemies.forEach((enemy, enemyIndex) => {
                if (enemy.destroyed) return;
                
                firewallGame.firewalls.forEach(tower => {
                    const distance = Math.sqrt(
                        Math.pow(enemy.x - (tower.x + firewallGame.gridSize/2), 2) +
                        Math.pow(enemy.y - (tower.y + firewallGame.gridSize/2), 2)
                    );
                    
                    if (distance < tower.range) {
                        enemy.health -= tower.damage;
                        
                        // Visual attack effect
                        ctx.save();
                        ctx.strokeStyle = '#ffffff80';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(tower.x + firewallGame.gridSize/2, tower.y + firewallGame.gridSize/2);
                        ctx.lineTo(enemy.x + enemy.width/2, enemy.y + enemy.height/2);
                        ctx.stroke();
                        ctx.restore();
                        
                        if (enemy.health <= 0) {
                            enemy.destroyed = true;
                            gameStats.score += 25 * firewallGame.waveNumber;
                        }
                    }
                });
            });
        }

        function checkWaveCompletion() {
            const activeEnemies = firewallGame.enemies.filter(e => !e.destroyed && e.x <= canvas.width);
            if (activeEnemies.length === 0 && firewallGame.enemies.filter(e => !e.destroyed).length === 0) {
                firewallGame.waveNumber++;
                gameStats.level = firewallGame.waveNumber;
                firewallGame.enemiesPerWave += 3;
                firewallGame.enemies = [];
            }
        }

        // CYBER SPRINT 3D GAME (Advanced Endless Runner)
        function initCyberSprintGame() {
            resetGameStats();
            runnerGame.obstacles = [];
            runnerGame.collectibles = [];
            runnerGame.distance = 0;
            runnerGame.lastObstacleSpawn = 0;
            runnerGame.player.y = canvas.height / 2;
            runnerGame.player.z = 0;
            runnerGame.cameraShake = 0;
            
            gameRunning = true;
            cyberSprintGameLoop();
            
            // Enhanced keyboard listeners
            document.addEventListener('keydown', handleAdvancedRunnerInput);
        }

        function cyberSprintGameLoop() {
            if (!gameRunning) return;
            
            // Advanced 3D cybercity background
            drawAdvanced3DCyberCity();
            
            // Update game state
            runnerGame.distance += runnerGame.scrollSpeed;
            runnerGame.scrollSpeed += 0.001; // Progressive speed increase
            
            // Spawn advanced 3D objects
            spawnAdvanced3DObjects();
            
            // Update and draw 3D player
            drawAdvanced3DPlayer();
            
            // Update 3D obstacles and collectibles
            updateAdvanced3DObstacles();
            updateAdvanced3DCollectibles();
            
            // Check enhanced collisions
            checkAdvanced3DCollisions();
            
            // Update score and level
            gameStats.score = Math.floor(runnerGame.distance / 5) + (gameStats.level * 100);
            gameStats.level = Math.floor(runnerGame.distance / 2000) + 1;
            
            updateGameUI();
            animationId = requestAnimationFrame(cyberSprintGameLoop);
        }

        function drawAdvanced3DCyberCity() {
            // Sophisticated 3D cyberpunk cityscape
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#001122');
            gradient.addColorStop(0.3, '#002244');
            gradient.addColorStop(0.7, '#001133');
            gradient.addColorStop(1, '#000811');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Moving 3D grid with perspective
            ctx.strokeStyle = '#00ffaa';
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.6;
            
            const offset = (runnerGame.distance * 2) % 60;
            const perspective = 0.003;
            
            // Horizontal grid lines with 3D perspective
            for (let i = 0; i < 15; i++) {
                const depth = i * 40;
                const scale = 1 - (depth * perspective);
                const y = canvas.height * 0.7 + (depth * 0.4) - offset;
                
                if (y > 0 && y < canvas.height) {
                    ctx.beginPath();
                    const lineWidth = canvas.width * scale;
                    const startX = (canvas.width - lineWidth) / 2;
                    ctx.moveTo(startX, y);
                    ctx.lineTo(startX + lineWidth, y);
                    ctx.stroke();
                }
            }
            
            // Vertical perspective lines
            for (let i = 0; i < 8; i++) {
                const x = (i * canvas.width / 7) - 50;
                ctx.beginPath();
                ctx.moveTo(x, canvas.height);
                ctx.lineTo(canvas.width / 2, canvas.height * 0.3);
                ctx.stroke();
            }
            
            ctx.globalAlpha = 1;
        }

        function drawAdvanced3DPlayer() {
            const player = runnerGame.player;
            const scale = 1.5;
            const renderWidth = player.width * scale;
            const renderHeight = player.height * scale;
            
            ctx.save();
            ctx.translate(player.x + renderWidth/2, player.y + renderHeight/2);
            
            // Player glow effect
            const glowGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, renderWidth);
            glowGradient.addColorStop(0, player.character === 'girl' ? '#ff44aa80' : '#44aaff80');
            glowGradient.addColorStop(1, 'transparent');
            ctx.fillStyle = glowGradient;
            ctx.fillRect(-renderWidth, -renderHeight, renderWidth * 2, renderHeight * 2);
            
            // Advanced character body
            const bodyGradient = ctx.createLinearGradient(-renderWidth/2, -renderHeight/2, renderWidth/2, renderHeight/2);
            bodyGradient.addColorStop(0, player.character === 'girl' ? '#ff1177' : '#1177ff');
            bodyGradient.addColorStop(0.5, player.character === 'girl' ? '#cc0044' : '#0044cc');
            bodyGradient.addColorStop(1, player.character === 'girl' ? '#880022' : '#002288');
            
            ctx.fillStyle = bodyGradient;
            ctx.fillRect(-renderWidth/2, -renderHeight/2, renderWidth, renderHeight);
            
            // Character details
            ctx.fillStyle = '#ffffff80';
            ctx.fillRect(-renderWidth/3, -renderHeight/3, renderWidth/1.5, renderHeight/1.5);
            
            ctx.restore();
        }

        function spawnAdvanced3DObjects() {
            const currentTime = Date.now();
            
            if (currentTime - runnerGame.lastObstacleSpawn > Math.max(800 - runnerGame.distance * 0.1, 300)) {
                // Spawn sophisticated 3D obstacles
                if (Math.random() < 0.8) {
                    runnerGame.obstacles.push({
                        x: canvas.width + 50,
                        y: Math.random() * (canvas.height - 100) + 50,
                        z: Math.random() * 50,
                        width: 60,
                        height: 40,
                        type: Math.random() > 0.5 ? 'cyberthreat' : 'datamine',
                        rotation: 0,
                        pulsePhase: Math.random() * Math.PI * 2
                    });
                }
                
                // Spawn premium 3D collectibles
                if (Math.random() < 0.4) {
                    runnerGame.collectibles.push({
                        x: canvas.width + 50,
                        y: Math.random() * (canvas.height - 80) + 40,
                        z: Math.random() * 30,
                        width: 35,
                        height: 35,
                        type: Math.random() > 0.6 ? 'quantum_shield' : Math.random() > 0.3 ? 'neural_antivirus' : 'crypto_key',
                        rotation: 0,
                        bob: Math.random() * Math.PI * 2
                    });
                }
                
                runnerGame.lastObstacleSpawn = currentTime;
            }
        }

        function updateAdvanced3DObstacles() {
            runnerGame.obstacles.forEach((obstacle, index) => {
                obstacle.x -= runnerGame.scrollSpeed;
                obstacle.rotation += 0.08;
                obstacle.pulsePhase += 0.12;
                
                const scale = 1 + (obstacle.z * 0.02);
                const renderWidth = obstacle.width * scale;
                const renderHeight = obstacle.height * scale;
                const pulse = Math.sin(obstacle.pulsePhase) * 8;
                
                ctx.save();
                ctx.translate(obstacle.x + renderWidth/2, obstacle.y + renderHeight/2);
                ctx.rotate(obstacle.rotation);
                
                // Advanced obstacle rendering
                const obstacleGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, renderWidth/2);
                if (obstacle.type === 'cyberthreat') {
                    obstacleGradient.addColorStop(0, '#ff0040');
                    obstacleGradient.addColorStop(0.7, '#cc0020');
                    obstacleGradient.addColorStop(1, '#880010');
                } else {
                    obstacleGradient.addColorStop(0, '#ff4000');
                    obstacleGradient.addColorStop(0.7, '#cc2000');
                    obstacleGradient.addColorStop(1, '#881000');
                }
                
                ctx.fillStyle = obstacleGradient;
                ctx.fillRect(-renderWidth/2 - pulse/2, -renderHeight/2 - pulse/2, renderWidth + pulse, renderHeight + pulse);
                
                // Threat details
                ctx.fillStyle = '#ffffff60';
                ctx.fillRect(-renderWidth/4, -renderHeight/4, renderWidth/2, renderHeight/2);
                
                ctx.restore();
                
                // Remove if off screen
                if (obstacle.x + renderWidth < -50) {
                    runnerGame.obstacles.splice(index, 1);
                }
            });
        }

        function updateAdvanced3DCollectibles() {
            runnerGame.collectibles.forEach((collectible, index) => {
                collectible.x -= runnerGame.scrollSpeed * 0.8;
                collectible.rotation += 0.15;
                collectible.bob += 0.1;
                
                const scale = 1 + (collectible.z * 0.015);
                const renderWidth = collectible.width * scale;
                const renderHeight = collectible.height * scale;
                const bobOffset = Math.sin(collectible.bob) * 10;
                
                ctx.save();
                ctx.translate(collectible.x + renderWidth/2, collectible.y + renderHeight/2 + bobOffset);
                ctx.rotate(collectible.rotation);
                
                // Premium collectible rendering
                const collectibleGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, renderWidth/2);
                switch(collectible.type) {
                    case 'quantum_shield':
                        collectibleGradient.addColorStop(0, '#00ffff');
                        collectibleGradient.addColorStop(0.7, '#00cccc');
                        collectibleGradient.addColorStop(1, '#008888');
                        break;
                    case 'neural_antivirus':
                        collectibleGradient.addColorStop(0, '#00ff00');
                        collectibleGradient.addColorStop(0.7, '#00cc00');
                        collectibleGradient.addColorStop(1, '#008800');
                        break;
                    case 'crypto_key':
                        collectibleGradient.addColorStop(0, '#ffff00');
                        collectibleGradient.addColorStop(0.7, '#cccc00');
                        collectibleGradient.addColorStop(1, '#888800');
                        break;
                }
                
                ctx.fillStyle = collectibleGradient;
                ctx.fillRect(-renderWidth/2, -renderHeight/2, renderWidth, renderHeight);
                
                // Collectible glow
                ctx.shadowColor = collectible.type === 'quantum_shield' ? '#00ffff80' : 
                                 collectible.type === 'neural_antivirus' ? '#00ff0080' : '#ffff0080';
                ctx.shadowBlur = 15;
                ctx.fillRect(-renderWidth/3, -renderHeight/3, renderWidth/1.5, renderHeight/1.5);
                
                ctx.restore();
                
                // Remove if off screen
                if (collectible.x + renderWidth < -50) {
                    runnerGame.collectibles.splice(index, 1);
                }
            });
        }

        function handleAdvancedRunnerInput(event) {
            const player = runnerGame.player;
            const speed = 8;
            
            switch(event.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    if (player.y > 20) player.y -= speed;
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    if (player.y < canvas.height - player.height - 20) player.y += speed;
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    if (player.x > 20) player.x -= speed;
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    if (player.x < canvas.width - player.width - 20) player.x += speed;
                    break;
            }
        }

        function checkAdvanced3DCollisions() {
            const player = runnerGame.player;
            
            // Enhanced obstacle collisions
            runnerGame.obstacles.forEach((obstacle, index) => {
                const scale = 1 + (obstacle.z * 0.02);
                const renderWidth = obstacle.width * scale;
                const renderHeight = obstacle.height * scale;
                
                if (player.x < obstacle.x + renderWidth &&
                    player.x + player.width > obstacle.x &&
                    player.y < obstacle.y + renderHeight &&
                    player.y + player.height > obstacle.y) {
                    
                    gameStats.health -= 25;
                    runnerGame.obstacles.splice(index, 1);
                    
                    // Screen shake effect
                    runnerGame.cameraShake = 10;
                    
                    if (gameStats.health <= 0) {
                        gameOver();
                    }
                }
            });
            
            // Enhanced collectible collisions
            runnerGame.collectibles.forEach((collectible, index) => {
                const scale = 1 + (collectible.z * 0.015);
                const renderWidth = collectible.width * scale;
                const renderHeight = collectible.height * scale;
                
                if (player.x < collectible.x + renderWidth &&
                    player.x + player.width > collectible.x &&
                    player.y < collectible.y + renderHeight &&
                    player.y + player.height > collectible.y) {
                    
                    switch(collectible.type) {
                        case 'quantum_shield':
                            gameStats.health = Math.min(100, gameStats.health + 20);
                            break;
                        case 'neural_antivirus':
                            gameStats.score += 100;
                            break;
                        case 'crypto_key':
                            gameStats.score += 200;
                            break;
                    }
                    
                    runnerGame.collectibles.splice(index, 1);
                }
            });
        }

        function resetGameStats() {
            gameStats = { score: 0, level: 1, health: 100 };
            updateGameUI();
        }

        function updateGameUI() {
            document.getElementById('gameScore').textContent = gameStats.score;
            document.getElementById('gameLevel').textContent = gameStats.level;
            document.getElementById('gameHealth').textContent = gameStats.health;
        }

        function stopGame() {
            gameRunning = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }

        function gameOver() {
            stopGame();
            document.getElementById('finalScore').textContent = gameStats.score;
            document.getElementById('gameOverScreen').classList.remove('hidden');
        }

        // FIREWALL BUILDER GAME
        function initFirewallGame() {
            resetGameStats();
            firewallGame.grid = [];
            firewallGame.enemies = [];
            firewallGame.firewalls = [];
            firewallGame.waveNumber = 1;
            firewallGame.enemiesPerWave = 5;
            firewallGame.lastEnemySpawn = 0;
            
            // Initialize grid
            for (let x = 0; x < canvas.width; x += firewallGame.gridSize) {
                for (let y = 0; y < canvas.height; y += firewallGame.gridSize) {
                    firewallGame.grid.push({ x, y, occupied: false });
                }
            }
            
            gameRunning = true;
            firewallGameLoop();
            
            // Add click listener for placing firewalls
            canvas.onclick = placeFirewall;
        }

        function firewallGameLoop() {
            if (!gameRunning) return;
            
            // Clear canvas
            ctx.fillStyle = '#e0f2fe';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            drawGrid();
            
            // Spawn enemies
            spawnEnemies();
            
            // Update and draw enemies
            updateEnemies();
            
            // Update and draw firewalls
            drawFirewalls();
            
            // Check collisions
            checkFirewallCollisions();
            
            // Check if enemies reached the end
            checkEnemyWin();
            
            updateGameUI();
            animationId = requestAnimationFrame(firewallGameLoop);
        }

        function drawGrid() {
            ctx.strokeStyle = '#b3e5fc';
            ctx.lineWidth = 1;
            
            for (let x = 0; x <= canvas.width; x += firewallGame.gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= canvas.height; y += firewallGame.gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }

        function spawnEnemies() {
            const currentTime = Date.now();
            if (currentTime - firewallGame.lastEnemySpawn > firewallGame.enemySpawnDelay && 
                firewallGame.enemies.filter(e => !e.destroyed).length < firewallGame.enemiesPerWave) {
                
                const enemy = {
                    x: 0,
                    y: Math.random() * (canvas.height - 40),
                    width: 30,
                    height: 30,
                    health: firewallGame.waveNumber,
                    maxHealth: firewallGame.waveNumber,
                    speed: firewallGame.enemySpeed + (firewallGame.waveNumber * 0.2),
                    destroyed: false,
                    type: Math.random() > 0.7 ? 'virus' : 'trojan'
                };
                
                firewallGame.enemies.push(enemy);
                firewallGame.lastEnemySpawn = currentTime;
            }
        }

        function updateEnemies() {
            firewallGame.enemies.forEach((enemy, index) => {
                if (enemy.destroyed) return;
                
                enemy.x += enemy.speed;
                
                // Draw enemy
                ctx.fillStyle = enemy.type === 'virus' ? '#f44336' : '#ff9800';
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                // Draw health bar
                const healthPercent = enemy.health / enemy.maxHealth;
                ctx.fillStyle = '#000';
                ctx.fillRect(enemy.x, enemy.y - 8, enemy.width, 4);
                ctx.fillStyle = healthPercent > 0.5 ? '#4caf50' : '#f44336';
                ctx.fillRect(enemy.x, enemy.y - 8, enemy.width * healthPercent, 4);
                
                // Draw enemy icon
                ctx.fillStyle = '#fff';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(enemy.type === 'virus' ? '🦠' : '🐴', enemy.x + enemy.width/2, enemy.y + enemy.height/2 + 7);
                
                // Remove if off screen
                if (enemy.x > canvas.width) {
                    gameStats.health -= 10;
                    firewallGame.enemies.splice(index, 1);
                    
                    if (gameStats.health <= 0) {
                        gameOver();
                    }
                }
            });
        }

        function drawFirewalls() {
            firewallGame.firewalls.forEach(firewall => {
                // Draw firewall based on type
                switch (firewall.type) {
                    case 'basic':
                        ctx.fillStyle = '#4caf50';
                        break;
                    case 'strong':
                        ctx.fillStyle = '#2196f3';
                        break;
                    case 'super':
                        ctx.fillStyle = '#9c27b0';
                        break;
                }
                
                ctx.fillRect(firewall.x, firewall.y, firewallGame.gridSize - 2, firewallGame.gridSize - 2);
                
                // Draw shield icon
                ctx.fillStyle = '#fff';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('🛡️', firewall.x + firewallGame.gridSize/2, firewall.y + firewallGame.gridSize/2 + 5);
            });
        }

        function placeFirewall(event) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            const clickX = (event.clientX - rect.left) * scaleX;
            const clickY = (event.clientY - rect.top) * scaleY;
            
            const gridX = Math.floor(clickX / firewallGame.gridSize) * firewallGame.gridSize;
            const gridY = Math.floor(clickY / firewallGame.gridSize) * firewallGame.gridSize;
            
            // Check if position is occupied
            const occupied = firewallGame.firewalls.some(fw => fw.x === gridX && fw.y === gridY);
            if (occupied || gridX < 60) return; // Don't place too close to start
            
            // Check if player has enough points for firewall type
            const costs = { basic: 0, strong: 50, super: 100 };
            const selectedType = getSelectedFirewallType();
            
            if (gameStats.score >= costs[selectedType]) {
                firewallGame.firewalls.push({
                    x: gridX,
                    y: gridY,
                    type: selectedType,
                    damage: selectedType === 'basic' ? 1 : selectedType === 'strong' ? 2 : 3
                });
                
                gameStats.score -= costs[selectedType];
            }
        }

        function getSelectedFirewallType() {
            // Cycle through firewall types based on clicks or add UI controls
            return 'basic'; // Default for now
        }

        function checkFirewallCollisions() {
            firewallGame.enemies.forEach((enemy, enemyIndex) => {
                if (enemy.destroyed) return;
                
                firewallGame.firewalls.forEach(firewall => {
                    if (enemy.x < firewall.x + firewallGame.gridSize &&
                        enemy.x + enemy.width > firewall.x &&
                        enemy.y < firewall.y + firewallGame.gridSize &&
                        enemy.y + enemy.height > firewall.y) {
                        
                        enemy.health -= firewall.damage;
                        
                        if (enemy.health <= 0) {
                            enemy.destroyed = true;
                            gameStats.score += 10 * firewallGame.waveNumber;
                            
                            // Check if wave complete
                            if (firewallGame.enemies.filter(e => !e.destroyed).length === 0) {
                                firewallGame.waveNumber++;
                                gameStats.level = firewallGame.waveNumber;
                                firewallGame.enemiesPerWave += 2;
                            }
                        }
                    }
                });
            });
        }

        function checkEnemyWin() {
            const activeEnemies = firewallGame.enemies.filter(e => !e.destroyed && e.x <= canvas.width);
            if (activeEnemies.length === 0 && firewallGame.enemies.length >= firewallGame.enemiesPerWave) {
                // Wave completed, start next wave
                firewallGame.enemies = [];
            }
        }

        // CYBER RUNNER GAME
        function initRunnerGame() {
            resetGameStats();
            runnerGame.obstacles = [];
            runnerGame.collectibles = [];
            runnerGame.distance = 0;
            runnerGame.lastObstacleSpawn = 0;
            runnerGame.player.y = canvas.height / 2;
            
            gameRunning = true;
            runnerGameLoop();
            
            // Add keyboard listeners
            document.addEventListener('keydown', handleRunnerInput);
            document.addEventListener('keyup', handleRunnerInputUp);
        }

        function runnerGameLoop() {
            if (!gameRunning) return;
            
            // Clear canvas with cyber background
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(1, '#16213e');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw cyber grid background
            drawCyberBackground();
            
            // Update distance
            runnerGame.distance += runnerGame.scrollSpeed;
            
            // Spawn obstacles and collectibles
            spawnRunnerObjects();
            
            // Update and draw player
            drawPlayer();
            
            // Update and draw obstacles
            updateObstacles();
            
            // Update and draw collectibles
            updateCollectibles();
            
            // Check collisions
            checkRunnerCollisions();
            
            // Update score and level
            gameStats.score = Math.floor(runnerGame.distance / 10);
            gameStats.level = Math.floor(runnerGame.distance / 1000) + 1;
            
            updateGameUI();
            animationId = requestAnimationFrame(runnerGameLoop);
        }

        function drawCyberBackground() {
            ctx.strokeStyle = '#00ff9f';
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.3;
            
            // Draw moving grid
            const offset = (runnerGame.distance * 0.5) % 40;
            
            for (let x = -offset; x < canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y < canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            ctx.globalAlpha = 1;
        }

        function drawPlayer() {
            const player = runnerGame.player;
            
            // Draw character based on selection
            ctx.fillStyle = player.character === 'girl' ? '#e91e63' : '#2196f3';
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Draw character icon
            ctx.fillStyle = '#fff';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            const icon = player.character === 'girl' ? '👩‍💻' : '👨‍💻';
            ctx.fillText(icon, player.x + player.width/2, player.y + player.height/2 + 10);
        }

        function spawnRunnerObjects() {
            const currentTime = Date.now();
            
            if (currentTime - runnerGame.lastObstacleSpawn > runnerGame.obstacleSpawnDelay) {
                // Spawn obstacle (phishing email)
                if (Math.random() < 0.7) {
                    runnerGame.obstacles.push({
                        x: canvas.width,
                        y: Math.random() * (canvas.height - 60),
                        width: 50,
                        height: 30,
                        type: 'phishing'
                    });
                }
                
                // Spawn collectible (security tool)
                if (Math.random() < 0.5) {
                    runnerGame.collectibles.push({
                        x: canvas.width,
                        y: Math.random() * (canvas.height - 40),
                        width: 30,
                        height: 30,
                        type: Math.random() > 0.5 ? 'antivirus' : 'shield'
                    });
                }
                
                runnerGame.lastObstacleSpawn = currentTime;
            }
        }

        function updateObstacles() {
            runnerGame.obstacles.forEach((obstacle, index) => {
                obstacle.x -= runnerGame.scrollSpeed;
                
                // Draw obstacle
                ctx.fillStyle = '#f44336';
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                
                // Draw phishing email icon
                ctx.fillStyle = '#fff';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('📧', obstacle.x + obstacle.width/2, obstacle.y + obstacle.height/2 + 7);
                
                // Remove if off screen
                if (obstacle.x + obstacle.width < 0) {
                    runnerGame.obstacles.splice(index, 1);
                }
            });
        }

        function updateCollectibles() {
            runnerGame.collectibles.forEach((collectible, index) => {
                collectible.x -= runnerGame.scrollSpeed;
                
                // Draw collectible
                ctx.fillStyle = collectible.type === 'antivirus' ? '#4caf50' : '#2196f3';
                ctx.fillRect(collectible.x, collectible.y, collectible.width, collectible.height);
                
                // Draw collectible icon
                ctx.fillStyle = '#fff';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                const icon = collectible.type === 'antivirus' ? '🛡️' : '🔒';
                ctx.fillText(icon, collectible.x + collectible.width/2, collectible.y + collectible.height/2 + 7);
                
                // Remove if off screen
                if (collectible.x + collectible.width < 0) {
                    runnerGame.collectibles.splice(index, 1);
                }
            });
        }

        function handleRunnerInput(event) {
            const player = runnerGame.player;
            const speed = 5;
            
            switch(event.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    if (player.y > 0) player.y -= speed;
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    if (player.y < canvas.height - player.height) player.y += speed;
                    break;
            }
        }

        function handleRunnerInputUp(event) {
            // Handle key up events if needed
        }

        function checkRunnerCollisions() {
            const player = runnerGame.player;
            
            // Check obstacle collisions
            runnerGame.obstacles.forEach((obstacle, index) => {
                if (player.x < obstacle.x + obstacle.width &&
                    player.x + player.width > obstacle.x &&
                    player.y < obstacle.y + obstacle.height &&
                    player.y + player.height > obstacle.y) {
                    
                    gameStats.health -= 20;
                    runnerGame.obstacles.splice(index, 1);
                    
                    if (gameStats.health <= 0) {
                        gameOver();
                    }
                }
            });
            
            // Check collectible collisions
            runnerGame.collectibles.forEach((collectible, index) => {
                if (player.x < collectible.x + collectible.width &&
                    player.x + player.width > collectible.x &&
                    player.y < collectible.y + collectible.height &&
                    player.y + player.height > collectible.y) {
                    
                    if (collectible.type === 'shield') {
                        gameStats.health = Math.min(100, gameStats.health + 10);
                    } else if (collectible.type === 'antivirus') {
                        gameStats.score += 50;
                    }
                    
                    runnerGame.collectibles.splice(index, 1);
                }
            });
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('slide-in');
                }
            });
        }, observerOptions);

        // Observe sections for animations
        document.querySelectorAll('section > div').forEach(section => {
            observer.observe(section);
        });

        // AI CHAT ASSISTANT FUNCTIONALITY
        let isAIChatOpen = false;

        function toggleAIChat() {
            const modal = document.getElementById('aiChatModal');
            isAIChatOpen = !isAIChatOpen;
            
            if (isAIChatOpen) {
                modal.classList.remove('hidden');
                document.getElementById('chatInput').focus();
            } else {
                modal.classList.add('hidden');
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        async function sendAIMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Clear input
            input.value = '';
            
            // Add user message to chat
            addMessageToChat(message, 'user');
            
            // Show typing indicator
            const typingId = addTypingIndicator();
            
            try {
                // Get AI response (using a simple cybersecurity knowledge base)
                const response = await getAIResponse(message);
                
                // Remove typing indicator
                removeTypingIndicator(typingId);
                
                // Add AI response to chat
                addMessageToChat(response, 'ai');
                
            } catch (error) {
                // Remove typing indicator
                removeTypingIndicator(typingId);
                
                // Add error message
                addMessageToChat('Sorry, I encountered an error. Please try asking another cybersecurity question!', 'ai');
            }
        }

        function addMessageToChat(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="bg-cyan-500 p-2 rounded-full mr-3 flex-shrink-0">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="bg-cyan-100 dark:bg-cyan-900/30 p-3 rounded-lg max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="bg-gradient-to-r from-cyan-500 to-blue-500 p-2 rounded-full mr-3 flex-shrink-0">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            const typingId = 'typing-' + Date.now();
            typingDiv.id = typingId;
            typingDiv.className = 'flex items-start';
            
            typingDiv.innerHTML = `
                <div class="bg-gradient-to-r from-cyan-500 to-blue-500 p-2 rounded-full mr-3 flex-shrink-0">
                    <i class="fas fa-robot text-white"></i>
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg max-w-xs">
                    <p class="text-sm">
                        <i class="fas fa-ellipsis-h animate-pulse"></i> Analyzing your question...
                    </p>
                </div>
            `;
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return typingId;
        }

        function removeTypingIndicator(typingId) {
            const typingDiv = document.getElementById(typingId);
            if (typingDiv) {
                typingDiv.remove();
            }
        }

        async function getAIResponse(message) {
            // Advanced AI-like cybersecurity response system
            const lowerMessage = message.toLowerCase();
            
            // Cybersecurity knowledge patterns with intelligent matching
            const knowledgeBase = {
                // Greetings and general
                greetings: {
                    patterns: ['hello', 'hi', 'hey', 'greetings', 'good morning', 'good afternoon', 'good evening'],
                    responses: [
                        "Hello! 👋 I'm CyberGuard AI, your dedicated cybersecurity assistant. I'm here to help you stay safe in the digital world. What security topic would you like to explore today?",
                        "Hi there! 🛡️ Welcome to CyberGuard AI. I specialize in helping people understand and implement strong cybersecurity practices. How can I protect you today?",
                        "Greetings! 🔒 I'm your cybersecurity expert assistant. Whether you need help with passwords, phishing, malware, or network security - I've got you covered!"
                    ]
                },
                
                help: {
                    patterns: ['help', 'what can you do', 'capabilities', 'assist', 'guide'],
                    responses: [
                        "I'm here to help with all aspects of cybersecurity! 🚀 I can assist with:\n\n🔐 **Password Security & MFA**\n📧 **Email & Phishing Protection**\n🦠 **Malware & Ransomware Defense**\n🌐 **Network & WiFi Security**\n💾 **Data Backup & Recovery**\n📱 **Mobile & IoT Security**\n☁️ **Cloud Security Best Practices**\n🚨 **Incident Response & Recovery**\n\nWhat specific area interests you most?"
                    ]
                },

                // Password Security
                passwords: {
                    patterns: ['password', 'passwords', 'passphrase', 'login', 'credential', 'authentication'],
                    responses: [
                        "🔐 **Strong Password Security Guide:**\n\n✅ **Length**: Use 12+ characters minimum\n✅ **Complexity**: Mix uppercase, lowercase, numbers, symbols\n✅ **Uniqueness**: Different password for each account\n✅ **Unpredictability**: Avoid personal info, dictionary words\n\n🛡️ **Pro Tips:**\n• Use a password manager (1Password, Bitwarden)\n• Try passphrases: 'Coffee@Beach!2024$Sunrise'\n• Enable 2FA on all critical accounts\n• Update breached passwords immediately\n\n💡 Want to test password strength? Most password managers have built-in generators and strength meters!"
                    ]
                },

                '2fa': {
                    patterns: ['2fa', 'two factor', 'mfa', 'multi-factor', 'authenticator', 'verification'],
                    responses: [
                        "🛡️ **Multi-Factor Authentication (MFA/2FA) Guide:**\n\n**Why It Matters:** Adds 99.9% protection against account takeovers!\n\n🥇 **Best Methods (Ranked):**\n1️⃣ **Hardware Keys** (YubiKey, Google Titan)\n2️⃣ **Authenticator Apps** (Google Authenticator, Authy)\n3️⃣ **SMS Codes** (least secure, but better than nothing)\n\n⚡ **Setup Priority:**\n• Email accounts (Gmail, Outlook)\n• Banking & financial services\n• Social media platforms\n• Work accounts & cloud storage\n\n💡 **Pro Tip:** Keep backup codes in a secure location!"
                    ]
                },

                // Phishing & Email Security
                phishing: {
                    patterns: ['phishing', 'phish', 'suspicious email', 'fake email', 'scam email', 'email security'],
                    responses: [
                        "🎣 **Phishing Detection & Prevention:**\n\n🚨 **Red Flags to Watch:**\n• Urgent language ('Act now!' 'Account suspended!')\n• Generic greetings ('Dear Customer')\n• Suspicious sender addresses\n• Mismatched URLs (hover to check)\n• Unexpected attachments\n• Grammar/spelling errors\n\n🛡️ **Protection Steps:**\n✅ Verify sender through official channels\n✅ Never click suspicious links\n✅ Type URLs manually\n✅ Use email filters\n✅ Report phishing attempts\n\n💡 **Remember:** Legitimate companies rarely ask for sensitive info via email!"
                    ]
                },

                email: {
                    patterns: ['email', 'gmail', 'outlook', 'mail'],
                    responses: [
                        "📧 **Email Security Best Practices:**\n\n🔒 **Account Security:**\n• Enable 2FA immediately\n• Use app-specific passwords\n• Review login activity regularly\n• Set up forwarding rules carefully\n\n🛡️ **Safe Email Habits:**\n• Verify sender before clicking links\n• Download attachments cautiously\n• Use encrypted email for sensitive data\n• Keep software updated\n\n⚠️ **Warning Signs:**\n• Unexpected password reset emails\n• Unknown login notifications\n• Suspicious forwarding rules\n• Missing emails\n\n💡 **Pro Tip:** Use separate emails for banking, shopping, and social accounts!"
                    ]
                },

                // Malware & Viruses
                malware: {
                    patterns: ['malware', 'virus', 'trojan', 'spyware', 'adware', 'infected'],
                    responses: [
                        "🦠 **Malware Protection & Removal Guide:**\n\n🛡️ **Prevention (Best Defense):**\n• Keep OS & software updated\n• Use reputable antivirus (Windows Defender, Bitdefender)\n• Avoid suspicious downloads\n• Enable real-time protection\n• Regular system scans\n\n🚨 **Infection Signs:**\n• Slow computer performance\n• Unexpected pop-ups\n• Browser redirects\n• Unknown programs running\n• High network activity\n\n⚡ **Immediate Action:**\n1. Disconnect from internet\n2. Boot in Safe Mode\n3. Run full antivirus scan\n4. Use Malwarebytes for deep cleaning\n5. Change all passwords after cleaning"
                    ]
                },

                ransomware: {
                    patterns: ['ransomware', 'ransom', 'encrypted files', 'crypto locker'],
                    responses: [
                        "🔒 **Ransomware Defense Strategy:**\n\n🛡️ **Prevention (Critical):**\n• **3-2-1 Backup Rule**: 3 copies, 2 different media, 1 offsite\n• Keep offline/air-gapped backups\n• Update OS & software regularly\n• Email attachment caution\n• Network segmentation\n\n🚨 **If Hit by Ransomware:**\n1. **DON'T PAY** the ransom\n2. Disconnect from network immediately\n3. Document everything\n4. Contact authorities\n5. Restore from clean backups\n\n💾 **Backup Solutions:**\n• External drives (disconnect when not in use)\n• Cloud storage with versioning\n• Network-attached storage (NAS)\n\n⚡ Most ransomware attacks are preventable with proper backups!"
                    ]
                },

                // Network Security
                network: {
                    patterns: ['network', 'wifi', 'router', 'firewall', 'vpn'],
                    responses: [
                        "🌐 **Network Security Essentials:**\n\n🔒 **WiFi Security:**\n• Use WPA3 (or WPA2 minimum)\n• Strong, unique passwords\n• Change default admin credentials\n• Hide SSID if desired\n• Guest network for visitors\n• Regular firmware updates\n\n🛡️ **Router Hardening:**\n• Disable WPS\n• Use strong admin passwords\n• Enable firewall\n• Disable unnecessary services\n• Monitor connected devices\n\n🔐 **VPN Benefits:**\n• Encrypts internet traffic\n• Protects on public WiFi\n• Masks IP address\n• Bypasses geo-restrictions\n\n💡 **Recommended VPNs:** NordVPN, ExpressVPN, Surfshark"
                    ]
                },

                vpn: {
                    patterns: ['vpn', 'virtual private network', 'tunneling'],
                    responses: [
                        "🔐 **VPN (Virtual Private Network) Guide:**\n\n**What It Does:**\n• Encrypts all internet traffic\n• Hides your real IP address\n• Protects data on public WiFi\n• Bypasses censorship/geo-blocks\n\n🏆 **Top VPN Services:**\n• **NordVPN** - Great security features\n• **ExpressVPN** - Fast & reliable\n• **Surfshark** - Budget-friendly\n• **ProtonVPN** - Strong privacy focus\n\n⚠️ **Avoid Free VPNs** - They often:\n• Log your data\n• Inject ads\n• Have slow speeds\n• Poor security\n\n💡 **When to Use:**\n• Public WiFi networks\n• Sensitive work activities\n• Traveling abroad\n• Enhanced privacy needs"
                    ]
                },

                // Data Protection
                backup: {
                    patterns: ['backup', 'data recovery', 'lost files', 'data protection'],
                    responses: [
                        "💾 **Data Backup Strategy (3-2-1 Rule):**\n\n**The Golden Rule:**\n🔢 **3** copies of important data\n📀 **2** different storage media types\n☁️ **1** copy stored offsite\n\n🛡️ **Backup Solutions:**\n• **Cloud**: Google Drive, Dropbox, iCloud\n• **External Drives**: USB, portable HDDs\n• **Network Storage**: NAS devices\n• **Automated**: Time Machine, Windows Backup\n\n⚡ **Backup Schedule:**\n• Critical files: Daily\n• Important files: Weekly\n• System images: Monthly\n• Test restores: Quarterly\n\n💡 **Pro Tip:** Ransomware can't encrypt offline backups!"
                    ]
                },

                encryption: {
                    patterns: ['encryption', 'encrypt', 'decrypt', 'crypto'],
                    responses: [
                        "🔐 **Encryption Guide:**\n\n**What Is It?**\nTransforms readable data into scrambled code that only authorized parties can decode.\n\n🛡️ **Types You Should Use:**\n• **Full-Disk**: BitLocker (Windows), FileVault (Mac)\n• **File/Folder**: 7-Zip, VeraCrypt\n• **Communication**: Signal, WhatsApp, ProtonMail\n• **Web**: Always look for HTTPS (🔒)\n\n🔑 **Encryption Standards:**\n• **AES-256**: Gold standard for file encryption\n• **RSA**: For secure key exchange\n• **End-to-End**: For messaging apps\n\n💡 **Best Practices:**\n• Encrypt sensitive files\n• Use strong passwords/passphrases\n• Keep encryption keys secure\n• Regular security updates"
                    ]
                },

                // Social Engineering
                'social engineering': {
                    patterns: ['social engineering', 'manipulation', 'pretexting', 'baiting', 'tailgating'],
                    responses: [
                        "🎭 **Social Engineering Defense:**\n\n**What It Is:**\nPsychological manipulation to trick people into revealing information or performing actions that compromise security.\n\n🚨 **Common Tactics:**\n• **Pretexting**: Fake scenarios to gain trust\n• **Baiting**: Offering something tempting\n• **Quid Pro Quo**: 'Favor for favor' exchanges\n• **Tailgating**: Following someone into secure areas\n• **Authority**: Impersonating officials\n\n🛡️ **Protection Strategies:**\n• Verify identity through official channels\n• Be skeptical of unsolicited contact\n• Never give sensitive info over phone/email\n• Question unusual requests\n• Trust your instincts\n\n💡 **Remember:** Attackers exploit human nature, not just technology!"
                    ]
                },

                // Mobile Security
                mobile: {
                    patterns: ['mobile', 'phone', 'smartphone', 'android', 'iphone', 'ios'],
                    responses: [
                        "📱 **Mobile Security Essentials:**\n\n🔒 **Device Protection:**\n• Strong lock screen (PIN/password/biometric)\n• Auto-lock after short timeout\n• Enable remote wipe capability\n• Regular OS updates\n• Avoid public charging stations\n\n📲 **App Security:**\n• Download from official stores only\n• Review app permissions carefully\n• Uninstall unused apps\n• Keep apps updated\n• Use mobile antivirus if needed\n\n🌐 **Network Safety:**\n• Avoid public WiFi for sensitive tasks\n• Use mobile VPN\n• Turn off auto-connect to WiFi\n• Disable Bluetooth when not needed\n\n💡 **Pro Tips:** Enable Find My Device and regular backups!"
                    ]
                },

                // Cloud Security
                cloud: {
                    patterns: ['cloud', 'aws', 'azure', 'google cloud', 'dropbox', 'onedrive'],
                    responses: [
                        "☁️ **Cloud Security Best Practices:**\n\n🔐 **Account Security:**\n• Enable 2FA on all cloud accounts\n• Use strong, unique passwords\n• Regular access reviews\n• Monitor login activity\n• Set up alerts for suspicious activity\n\n🛡️ **Data Protection:**\n• Encrypt sensitive files before upload\n• Understand sharing permissions\n• Regular permission audits\n• Use business accounts for work data\n• Backup critical cloud data locally\n\n⚠️ **Shared Responsibility:**\n• **Cloud Provider**: Infrastructure security\n• **You**: Data, access, and configuration\n\n💡 **Popular Secure Options:** ProtonDrive, pCloud Crypto, SpiderOak"
                    ]
                },

                // Incident Response
                incident: {
                    patterns: ['incident', 'breach', 'attack', 'compromise', 'hacked', 'response'],
                    responses: [
                        "🚨 **Incident Response Plan:**\n\n**Immediate Actions (First 30 mins):**\n1️⃣ **Contain**: Disconnect affected systems\n2️⃣ **Assess**: Determine scope of damage\n3️⃣ **Document**: Record everything\n4️⃣ **Notify**: Inform relevant parties\n5️⃣ **Preserve**: Collect evidence\n\n🔍 **Investigation Phase:**\n• Identify attack vector\n• Assess data impact\n• Determine root cause\n• Timeline reconstruction\n\n🛠️ **Recovery Steps:**\n• Remove malware/threats\n• Patch vulnerabilities\n• Restore from clean backups\n• Monitor for reinfection\n• Update security measures\n\n📞 **When to Call Experts:** Complex attacks, legal requirements, or if overwhelmed"
                    ]
                },

                // Updates & Patches
                updates: {
                    patterns: ['update', 'patch', 'software update', 'security update'],
                    responses: [
                        "🔄 **Software Update Strategy:**\n\n**Why Updates Matter:**\nSecurity patches fix vulnerabilities that attackers actively exploit!\n\n⚡ **Update Priority (High to Low):**\n1️⃣ **Operating System** (Windows, macOS, Linux)\n2️⃣ **Browsers** (Chrome, Firefox, Safari)\n3️⃣ **Security Software** (Antivirus, firewall)\n4️⃣ **Critical Apps** (Email, PDF readers)\n5️⃣ **Other Software**\n\n🛡️ **Best Practices:**\n• Enable automatic updates when safe\n• Test critical updates in non-production\n• Update firmware (routers, IoT devices)\n• Remove unused software\n• Subscribe to security bulletins\n\n💡 **Patch Tuesday:** Microsoft releases updates second Tuesday of each month"
                    ]
                },

                // IoT Security
                iot: {
                    patterns: ['iot', 'smart home', 'smart device', 'internet of things', 'alexa', 'google home'],
                    responses: [
                        "🏠 **IoT & Smart Device Security:**\n\n🔒 **Initial Setup:**\n• Change default passwords immediately\n• Update firmware before use\n• Enable automatic updates\n• Review privacy settings\n• Create separate IoT network\n\n🛡️ **Ongoing Security:**\n• Regular firmware updates\n• Monitor device behavior\n• Review connected apps/services\n• Limit data sharing\n• Disable unnecessary features\n\n⚠️ **Common Vulnerabilities:**\n• Default/weak passwords\n• Outdated firmware\n• Unencrypted communications\n• Poor authentication\n\n💡 **Network Segmentation:** Keep IoT devices on separate network from computers/phones"
                    ]
                },

                // Zero Trust
                'zero trust': {
                    patterns: ['zero trust', 'ztna', 'never trust always verify'],
                    responses: [
                        "🔐 **Zero Trust Security Model:**\n\n**Core Principle:** 'Never Trust, Always Verify'\n\n🛡️ **Key Components:**\n• **Identity Verification**: Multi-factor authentication\n• **Device Verification**: Ensure device compliance\n• **Least Privilege**: Minimal necessary access\n• **Micro-segmentation**: Isolate network zones\n• **Continuous Monitoring**: Real-time threat detection\n\n🏢 **Implementation Steps:**\n1. Identify and classify data\n2. Map data flows\n3. Design micro-perimeters\n4. Deploy monitoring tools\n5. Enforce policies\n\n💡 **Benefits:**\n• Reduced attack surface\n• Better breach containment\n• Improved compliance\n• Enhanced visibility"
                    ]
                }
            };

            // Smart pattern matching with context awareness
            let bestMatch = null;
            let bestScore = 0;

            for (const [category, data] of Object.entries(knowledgeBase)) {
                for (const pattern of data.patterns) {
                    const score = calculateMatchScore(lowerMessage, pattern);
                    if (score > bestScore) {
                        bestScore = score;
                        bestMatch = data;
                    }
                }
            }

            // If we found a good match (score > 0.3), use it
            if (bestMatch && bestScore > 0.3) {
                const responses = bestMatch.responses;
                let response = responses[Math.floor(Math.random() * responses.length)];
                
                // Add personalized suggestions
                const suggestions = [
                    '\n\n💡 **Want hands-on practice?** Try our Investigation Lab game to test your skills!',
                    '\n\n🎓 **Ready for formal training?** Check out our Learning Hubs for professional courses!',
                    '\n\n🔍 **Test your knowledge** with our interactive cybersecurity scenarios!',
                    '\n\n⚡ **Explore more** cybersecurity topics in our comprehensive guide above!'
                ];
                
                // Add suggestion 40% of the time
                if (Math.random() < 0.4) {
                    response += suggestions[Math.floor(Math.random() * suggestions.length)];
                }
                
                return response;
            }

            // Fallback for unmatched queries
            return generateContextualResponse(lowerMessage);
        }

        function calculateMatchScore(message, pattern) {
            // Advanced scoring algorithm
            const words = message.split(/\s+/);
            const patternWords = pattern.split(/\s+/);
            
            let score = 0;
            
            // Exact phrase match gets highest score
            if (message.includes(pattern)) {
                score += 1.0;
            }
            
            // Word-by-word matching
            for (const patternWord of patternWords) {
                for (const word of words) {
                    if (word === patternWord) {
                        score += 0.8;
                    } else if (word.includes(patternWord) || patternWord.includes(word)) {
                        score += 0.5;
                    }
                }
            }
            
            // Normalize by pattern length
            return score / patternWords.length;
        }

        function generateContextualResponse(message) {
            // Smart fallback based on message content
            if (message.includes('how') || message.includes('what') || message.includes('why')) {
                return `🤔 Great question about cybersecurity! While I didn't find a specific match in my knowledge base, here are some key security principles to consider:

🔒 **Fundamental Security Layers:**
• **Strong Authentication** - Use unique passwords + 2FA
• **Keep Software Updated** - Install security patches promptly  
• **Email Vigilance** - Verify before clicking links/attachments
• **Regular Backups** - Protect against ransomware & data loss
• **Network Security** - Secure WiFi & consider VPN usage

💡 **For specific guidance:** Try rephrasing your question with terms like "password security," "phishing protection," or "malware defense."

🎓 **Want expert training?** Our Learning Hubs offer professional cybersecurity courses from top institutions!`;
            }
            
            if (message.includes('help') || message.includes('need')) {
                return `🛡️ I'm here to help with cybersecurity! I can provide expert guidance on:

🔐 **Authentication & Access**
📧 **Email & Phishing Security**  
🦠 **Malware & Ransomware Protection**
🌐 **Network & WiFi Security**
💾 **Data Backup & Recovery**
📱 **Mobile Device Security**
☁️ **Cloud Security Practices**
🚨 **Incident Response**

💬 **Just ask me about any of these topics!** For example:
• "How do I create strong passwords?"
• "What are signs of phishing emails?"
• "How do I protect against ransomware?"

🎯 **Ready for hands-on learning?** Try our Investigation Lab or explore our Learning Hubs!`;
            }
            
            return `🤖 I'm CyberGuard AI, your cybersecurity expert! I specialize in helping people stay safe online.

🎯 **I can help you with:**
• Password security and authentication
• Phishing and email protection
• Malware and ransomware defense
• Network and WiFi security
• Data backup and recovery
• Mobile and IoT security
• Incident response planning

💬 **Try asking specific questions like:**
"How do I secure my WiFi?" or "What is two-factor authentication?"

🚀 **Want to practice?** Check out our Investigation Lab game or explore professional courses in our Learning Hubs section!`;
        }

        // Initialize AI chat when page loads
        window.addEventListener('load', () => {
            // Add some initial state
            investigationState.magic8BallShown = false;
        });
    </script>
</body>
</html>
